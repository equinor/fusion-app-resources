parameters:
  - name: azureSubscription
    type: string
  - name: clientId
    type: string
    displayName: 'AAD Application to create secret on'
  - name: name
    type: string
    default: checkSecret
  - name: secretDescription
    default: 'resource - auto-generated'
  - name: condition

steps:
- task: AzurePowerShell@5
  displayName: 'Generate secret'
  name: ${{ parameters.name }}
  condition: ${{ parameters.condition }}
  inputs:
    azureSubscription: ${{ parameters.azureSubscription }}
    ScriptType: InlineScript
    FailOnStandardError: true
    azurePowerShellVersion: 'LatestVersion'
    Inline: |
      $CLIENTID = "${{ parameters.clientId }}"
      Write-Host "Key vault: $SECRETVAULTNAME"
      Write-Host "Secret name: $SECRET_NAME"


    