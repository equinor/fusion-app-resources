import { useEffect } from 'react';
import { withAbortController } from '../utils/AbortControllerManager';
export default (abortableAction, value, delay = 300) => {
    const abortable = withAbortController();
    useEffect(() => {
        let abort = null;
        const timer = setTimeout(() => {
            abort = abortable((signal) => abortableAction(value, signal));
        }, delay);
        return () => {
            if (abort !== null) {
                abort();
            }
            clearTimeout(timer);
        };
    }, [value, delay, abortableAction]);
};
