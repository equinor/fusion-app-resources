import version from '../../version';
const defaultHeaders = {
    Accept: 'application/json',
    'Content-Type': 'application/json',
    'x-fusion-api-version': version,
};
export default (init, transform) => {
    const headers = new Headers();
    for (const key in defaultHeaders) {
        headers.append(key, defaultHeaders[key]);
    }
    if (init && init.headers) {
        const overriddenHeaders = new Headers(init.headers);
        for (const overriddenHeader of overriddenHeaders) {
            headers.set(overriddenHeader[0], overriddenHeader[1]);
        }
    }
    init = Object.assign(Object.assign({}, init), { headers });
    if (typeof transform === 'undefined') {
        return init;
    }
    return transform(init);
};
