/*!
 * Application Insights JavaScript SDK - Dependencies Plugin, 2.5.11
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */
var e=this,t=function(e){"use strict";var r="function",i="object",t="undefined",a="prototype",o="hasOwnProperty";function n(){return typeof globalThis!==t&&globalThis?globalThis:typeof self!==t&&self?self:typeof window!==t&&window?window:typeof global!==t&&global?global:null}function s(e){var t=Object.create;if(t)return t(e);if(null==e)return{};if((t=typeof e)!==i&&t!==r)throw new TypeError("Object prototype may only be an Object:"+e);function n(){}return n[a]=e,new n}var u,p,R,c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t[o](n)&&(e[n]=t[n])})(e,t)};ot=function(e,t){function n(){this.constructor=e}c(e,t),e[a]=null===t?s(t):(n[a]=t[a],new n)},(Ke=zt=n()||{}).__assign||(Ke.__assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object[a][o].call(t,i)&&(e[i]=t[i]);return e}),Ke.__extends||(Ke.__extends=ot),__assign=__assign||zt.__assign,__extends=__extends||zt.__extends,(wn=u={})[wn.LocalStorage=0]="LocalStorage",wn[wn.SessionStorage=1]="SessionStorage",(Xt=p=p||{})[Xt.Default=0]="Default",Xt[Xt.Required=1]="Required",Xt[Xt.Array=2]="Array",Xt[Xt.Hidden=4]="Hidden",(Jt=R=R||{})[Jt.AI=0]="AI",Jt[Jt.AI_AND_W3C=1]="AI_AND_W3C",Jt[Jt.W3C=2]="W3C";var l=2,f=t,d=i,q=a,g=r,h="window",m="location",v="performance",x="JSON",k=n;function y(e){var t=k();return t&&t[e]?t[e]:e===h&&S()?window:null}function S(){return typeof window===d&&window}function C(){return S()?window:y(h)}function I(){return typeof document===d&&document?document:y("document")}function T(){return typeof navigator===d&&navigator?navigator:y("navigator")}function F(){return typeof location===d&&location?location:y(m)}function H(){return y(v)}function _(){return typeof JSON===d&&JSON||null!==y(x)}function N(){return _()?JSON||y(x):null}var b="attachEvent",A="addEventListener",w="detachEvent",E="removeEventListener",M=4294967296,D=4294967295,L=null,O=!1,P=123456789,j=987654321;function U(e){e<0&&(e>>>=0),P=123456789+e&D,j=987654321-e&D,O=!0}function z(){U(Math.random()*M^(new Date).getTime())}function G(e,t){return typeof e===t}function B(e){return G(e,t)||e===undefined}function W(e){return B(e)||null===e}function X(e,t){return e&&Object[a].hasOwnProperty.call(e,t)}function V(e){return G(e,i)}function K(e){return G(e,r)}function $(e,t,n,r){void 0===r&&(r=!1);var i=!1;if(!W(e))try{W(e[A])?W(e[b])||(e[b]("on"+t,n),i=!0):(e[A](t,n,r),i=!0)}catch(a){}return i}function J(e,t,n,r){if(void 0===r&&(r=!1),!W(e))try{W(e[E])?W(e[w])||e[w]("on"+t,n):e[E](t,n,r)}catch(i){}}function Q(e,t){if(e&&V(e))for(var n in e)X(e,n)&&t.call(e,n,e[n])}var Y=(Z.isDate=function(e){return"[object Date]"===Object[a].toString.call(e)},Z.isArray=function(e){return"[object Array]"===Object[a].toString.call(e)},Z.isError=function(e){return"[object Error]"===Object[a].toString.call(e)},Z.isString=function(e){return G(e,"string")},Z.isNumber=function(e){return G(e,"number")},Z.isBoolean=function(e){return G(e,"boolean")},Z.disableCookies=function(){Z._canUseCookies=!1},Z.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(te,function(e){var t=0|Z.randomValue(15);return("x"===e?t:3&t|8).toString(16)})},Z.toISOString=function(e){if(Z.isDate(e)){var t=function(e){return 1===(e+="").length&&(e="0"+e),e};return e.getUTCFullYear()+"-"+t(1+e.getUTCMonth())+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+((e.getUTCMilliseconds()/1e3).toFixed(3)+"").slice(2,5)+"Z"}},Z.arrForEach=function(e,t,n){for(var r=e.length,i=0;i<r;i++)i in e&&t.call(n||e,e[i],i,e)},Z.arrIndexOf=function(e,t,n){for(var r=e.length,i=Math.max(0<=(n=n||0)?n:r-Math.abs(n),0);i<r;i++)if(i in e&&e[i]===t)return i;return-1},Z.arrMap=function(e,t,n){for(var r=e.length,i=n||e,a=Array(r),o=0;o<r;o++)o in e&&(a[o]=t.call(i,e[o],e));return a},Z.arrReduce=function(e,t,n){var r,i=e.length,a=0;if(3<=arguments.length)r=n;else{for(;a<i&&!(a in e);)a++;r=e[a++]}for(;a<i;)a in e&&(r=t(r,e[a],a,e)),a++;return r},Z.strTrim=function(e){return Z.isString(e)?e.replace(/^\s+|\s+$/g,""):e},Z.objKeys=function(e){var t=!{toString:null}.propertyIsEnumerable("toString");if(!(K(e)||V(e)&&null!==e))throw new TypeError("objKeys called on non-object");var n,r=[];for(n in e)X(e,n)&&r.push(n);if(t)for(var i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],a=i.length,o=0;o<a;o++)X(e,i[o])&&r.push(i[o]);return r},Z.addEventHandler=function(e,t){var n=!1,r=C();return r&&(n=$(r,e,t),n=$(r.body,e,t)||n),(r=I())&&(n=ne.Attach(r,e,t)||n),n},Z.dateNow=function(){var e=Date;return e.now?e.now():(new e).getTime()},Z.perfNow=function(){var e=H();return e&&e.now?e.now():Z.dateNow()},Z.newId=function(e){void 0===e&&(e=22);for(var t=Z.random32()>>>0,n=0,r="";r.length<e;)r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[0|63&t],t>>>=6,5==++n&&(t=(Z.random32()<<2&4294967295|3&t)>>>0,n=0);return r},Z.isIE=function(){var e;return null===L&&(e=((T()||{}).userAgent||"").toLowerCase(),L=!!~e.indexOf("msie")||!!~e.indexOf("trident/")),L},Z.randomValue=function(e){return 0<e?Math.floor(Z.random32()/D*(e+1))>>>0:0},Z.random32=function(e){var t=(t=y("crypto")||y("msCrypto"))&&t.getRandomValues?t.getRandomValues(new Uint32Array(1))[0]&D:Z.isIE()?(O||z(),Z.mwcRandom32()&D):Math.floor(M*Math.random()|0);return e||(t>>>=0),t},Z.mwcRandomSeed=function(e){e?U(e):z()},Z.mwcRandom32=function(e){var t=((j=36969*(65535&j)+(j>>16)&D)<<16)+(65535&(P=18e3*(65535&P)+(P>>16)&D))>>>0&D|0;return e||(t>>>=0),t},Z.generateW3CId=function(){for(var e,t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n="",r=0;r<4;r++)n+=t[15&(e=Z.random32())]+t[e>>4&15]+t[e>>8&15]+t[e>>12&15]+t[e>>16&15]+t[e>>20&15]+t[e>>24&15]+t[e>>28&15];var i=t[8+(3&Z.random32())|0];return n.substr(0,8)+n.substr(9,4)+"4"+n.substr(13,3)+i+n.substr(16,3)+n.substr(19,12)},Z.isTypeof=G,Z.isUndefined=B,Z.isNullOrUndefined=W,Z.hasOwnProperty=X,Z.isFunction=K,Z.isObject=V,Z.objCreate=s,Z.objDefineAccessors=function(e,t,n,r){var i=Object.defineProperty;if(i)try{var a={enumerable:!0,configurable:!0};return n&&(a.get=n),r&&(a.set=r),i(e,t,a),!0}catch(o){}return!1},Z);function Z(){}var ee,te=/[xy]/g,ne=(re.Attach=$,re.AttachEvent=$,re.Detach=J,re.DetachEvent=J,re);function re(){}(Qt=ee=ee||{})[Qt.CRITICAL=1]="CRITICAL",Qt[Qt.WARNING=2]="WARNING";var ie={BrowserDoesNotSupportLocalStorage:0,BrowserCannotReadLocalStorage:1,BrowserCannotReadSessionStorage:2,BrowserCannotWriteLocalStorage:3,BrowserCannotWriteSessionStorage:4,BrowserFailedRemovalFromLocalStorage:5,BrowserFailedRemovalFromSessionStorage:6,CannotSendEmptyTelemetry:7,ClientPerformanceMathError:8,ErrorParsingAISessionCookie:9,ErrorPVCalc:10,ExceptionWhileLoggingError:11,FailedAddingTelemetryToBuffer:12,FailedMonitorAjaxAbort:13,FailedMonitorAjaxDur:14,FailedMonitorAjaxOpen:15,FailedMonitorAjaxRSC:16,FailedMonitorAjaxSend:17,FailedMonitorAjaxGetCorrelationHeader:18,FailedToAddHandlerForOnBeforeUnload:19,FailedToSendQueuedTelemetry:20,FailedToReportDataLoss:21,FlushFailed:22,MessageLimitPerPVExceeded:23,MissingRequiredFieldSpecification:24,NavigationTimingNotSupported:25,OnError:26,SessionRenewalDateIsZero:27,SenderNotInitialized:28,StartTrackEventFailed:29,StopTrackEventFailed:30,StartTrackFailed:31,StopTrackFailed:32,TelemetrySampledAndNotSent:33,TrackEventFailed:34,TrackExceptionFailed:35,TrackMetricFailed:36,TrackPVFailed:37,TrackPVFailedCalc:38,TrackTraceFailed:39,TransmissionFailed:40,FailedToSetStorageBuffer:41,FailedToRestoreStorageBuffer:42,InvalidBackendResponse:43,FailedToFixDepricatedValues:44,InvalidDurationValue:45,TelemetryEnvelopeInvalid:46,CreateEnvelopeError:47,CannotSerializeObject:48,CannotSerializeObjectNonSerializable:49,CircularReferenceDetected:50,ClearAuthContextFailed:51,ExceptionTruncated:52,IllegalCharsInName:53,ItemNotInArray:54,MaxAjaxPerPVExceeded:55,MessageTruncated:56,NameTooLong:57,SampleRateOutOfRange:58,SetAuthContextFailed:59,SetAuthContextFailedAccountName:60,StringValueTooLong:61,StartCalledMoreThanOnce:62,StopCalledWithoutStart:63,TelemetryInitializerFailed:64,TrackArgumentsNotSpecified:65,UrlTooLong:66,SessionStorageBufferFull:67,CannotAccessCookie:68,IdTooLong:69,InvalidEvent:70,FailedMonitorAjaxSetRequestHeader:71,SendBrowserInfoOnUserInit:72,PluginException:73,NotificationException:74,SnippetScriptLoadFailure:99,InvalidInstrumentationKey:100,CannotParseAiBlobValue:101,InvalidContentBlob:102,TrackPageActionEventFailed:103},ae="constructor",oe="prototype",se="function",ue="_dynInstFuncs",ce="_isDynProxy",le="_dynClass",fe="_dynCls$",de="_dynInstChk",pe=de,ge="_dfOpts",he="_unknown_",me="__proto__",ve="useBaseInst",xe="setInstFuncs",ye=Object.getPrototypeOf,Se=0;function Ce(e,t){return e&&Object[oe].hasOwnProperty.call(e,t)}function Ie(e){return typeof e===se}function Te(e){return e&&(e===Object[oe]||e===Array[oe])}function _e(e){return Te(e)||e===Function[oe]}function Ne(e){if(e){if(ye)return ye(e);if(e=e[me]||e[oe]||e[ae])return e}return null}function be(e,t,n){return t!==ae&&Ie(e[t])&&(n||Ce(e,t))}function Ae(e){throw new TypeError("DynamicProto: "+e)}function we(e,t){for(var n=e.length-1;0<=n;n--)if(e[n]===t)return 1}function Ee(e,t){return Ce(e,oe)?e.name||t||he:((e||{})[ae]||{}).name||t||he}function Me(e,n,t,r){Ce(e,oe)||Ae("theClass is an invalid class definition.");var i=e[oe];!function(e){for(var t=Ne(n);t&&!_e(t);){if(t===e)return 1;t=Ne(t)}}(i)&&Ae("["+Ee(e)+"] is not in class hierarchy of ["+Ee(n)+"]");var a=null;Ce(i,le)?a=i[le]:(a=fe+Ee(e,"_")+"$"+Se,Se++,i[le]=a);var o=Me[ge],s=!!o[ve];s&&r&&r[ve]!==undefined&&(s=!!r[ve]),t(n,function(e,t,n,a){function r(e,t,n){var r,i=t[u];return i[ce]&&a&&!1!==(r=e[ue]||{})[pe]&&(i=(r[t[le]]||{})[n]||i),function(){return i.apply(e,arguments)}}var i={};for(u in n)i[u]=r(t,n,u);for(var o=Ne(e),s=[];o&&!_e(o)&&!we(s,o);){for(var u in o)!i[u]&&be(o,u,!ye)&&(i[u]=r(t,o,u));s.push(o),o=Ne(o)}return i}(i,n,e=function(e){var t,n={};for(t in e)!n[t]&&be(e,t,!1)&&(n[t]=e[t]);return n}(n),s)),(o=!!ye&&!!o[xe])&&r&&(o=!!r[xe]),function(e,t,n,r,i){if(!Te(e)){var a,o=n[ue]=n[ue]||{},s=o[t]=o[t]||{};for(a in!1!==o[pe]&&(o[pe]=!!i),n)be(n,a,!1)&&n[a]!==r[a]&&(s[a]=n[a],delete n[a],Ce(e,a)&&(!e[a]||e[a][ce])||(e[a]=function(n,r){var i=function(){var e,t;return(function(e,t,n,r){var i=null;if(e&&Ce(n,le)){var a=e[ue]||{};if((i=(a[n[le]]||{})[t])||Ae("Missing ["+t+"] "+se),!i[de]&&!1!==a[pe]){for(var o=!Ce(e,t),s=Ne(e),u=[];o&&s&&!_e(s)&&!we(u,s);){var c=s[t];if(c){o=c===r;break}u.push(s),s=Ne(s)}try{o&&(e[t]=i),i[de]=1}catch(l){a[pe]=!1}}}return i}(this,r,n,i)||((t=n[e=r])===i&&(t=Ne(n)[e]),Ie(t)||Ae("["+e+"] is not a "+se),t)).apply(this,arguments)};return i[ce]=1,i}(e,a)))}}(i,a,n,e,!1!==o)}function De(e){return e?'"'+e.replace(/\"/g,"")+'"':""}Me[ge]={setInstFuncs:!0,useBaseInst:!0};var Le=(Re.dataType="MessageData",Re);function Re(e,t,n,r){void 0===n&&(n=!1),this.messageId=e,this.message=(n?"AI: ":"AI (Internal): ")+e,e="",_()&&(e=N().stringify(r)),e=(t?" message:"+De(t):"")+(r?" props:"+De(e):""),this.message+=e}var qe=function fr(i){this.identifier="DiagnosticLogger",this.queue=[];var s=0,u={};Me(fr,this,function(a){var n=Y.isNullOrUndefined,o=Y.isUndefined,r=Y.isFunction;function e(e,t){return e=i[e],n(e)?t:e}n(i)&&(i={}),a.consoleLoggingLevel=function(){return e("loggingLevelConsole",0)},a.telemetryLoggingLevel=function(){return e("loggingLevelTelemetry",1)},a.maxInternalMessageLimit=function(){return e("maxMessageLimit",25)},a.enableDebugExceptions=function(){return e("enableDebugExceptions",!1)},a.throwInternal=function(e,t,n,r,i){if(void 0===i&&(i=!1),r=new Le(t,n,i,r),a.enableDebugExceptions())throw r;!o(r)&&r&&(o(r.message)||(i?(i=+r.messageId,!u[i]&&a.consoleLoggingLevel()>=ee.WARNING&&(a.warnToConsole(r.message),u[i]=!0)):a.consoleLoggingLevel()>=ee.WARNING&&a.warnToConsole(r.message),a.logInternalMessage(e,r)))},a.warnToConsole=function(e){var t,n=typeof console!==f?console:y("console");n&&(t="log",n.warn&&(t="warn"),r(n[t])&&n[t](e))},a.resetInternalMessageCount=function(){s=0,u={}},a.logInternalMessage=function(e,t){var n,r;s>=a.maxInternalMessageLimit()||(n=!0,r="AITR_"+t.messageId,u[r]?n=!1:u[r]=!0,n&&(e<=a.telemetryLoggingLevel()&&(a.queue.push(t),s++),s===a.maxInternalMessageLimit()&&(e="Internal events throttle limit per PageView reached for this app.",t=new Le(ie.MessageLimitPerPVExceeded,e,!1),a.queue.push(t),a.warnToConsole(e))))}})},ke="ctx",Fe=(He.ParentContextKey="parent",He.ChildrenContextKey="childEvts",He);function He(e,i,t){var n,a=this,o=!1;a.start=Y.dateNow(),a.name=e,a.isAsync=t,a.isChildEvt=function(){return!1},Y.isFunction(i)&&(o=Y.objDefineAccessors(a,"payload",function(){return!n&&Y.isFunction(i)&&(n=i(),i=null),n})),a.getCtx=function(e){return e?(e===He.ParentContextKey||e===He.ChildrenContextKey?a:a[ke]||{})[e]:null},a.setCtx=function(e,t){e&&(e===He.ParentContextKey?(a[e]||(a.isChildEvt=function(){return!0}),a[e]=t):e===He.ChildrenContextKey?a[e]=t:(a[ke]=a[ke]||{})[e]=t)},a.complete=function(){var e=0,t=a.getCtx(He.ChildrenContextKey);if(Y.isArray(t))for(var n=0;n<t.length;n++){var r=t[n];r&&(e+=r.time)}a.time=Y.dateNow()-a.start,a.exTime=a.time-e,a.complete=function(){},!o&&Y.isFunction(i)&&(a.payload=i())}}var Oe=function dr(t){this.ctx={},Me(dr,this,function(n){n.create=function(e,t,n){return new Fe(e,t,n)},n.fire=function(e){e&&(e.complete(),t&&t.perfEvent(e))},n.setCtx=function(e,t){e&&((n[ke]=n[ke]||{})[e]=t)},n.getCtx=function(e){return(n[ke]||{})[e]}})},Pe="CoreUtils.doPerf";function je(e,t,n,r,i){if(e){var a=e;if(a&&Y.isFunction(a.getPerfMgr)&&(a=a.getPerfMgr()),a){var o,s=void 0,u=a.getCtx(Pe);try{if(s=a.create(t(),r,i))return u&&s.setCtx&&(s.setCtx(Fe.ParentContextKey,u),u.getCtx&&u.setCtx&&((o=u.getCtx(Fe.ChildrenContextKey))||(o=[],u.setCtx(Fe.ChildrenContextKey,o)),o.push(s))),a.setCtx(Pe,s),n(s)}catch(c){s&&s.setCtx&&s.setCtx("exception",c)}finally{s&&a.fire(s),a.setCtx(Pe,u)}}}return n()}var Ue=Y.isFunction,ze=function(i,t){var a=this,o=null,s=Ue(i.processTelemetry),u=Ue(i.setNextPlugin);a._hasRun=!1,a.getPlugin=function(){return i},a.getNext=function(){return o},a.setNext=function(e){o=e},a.processTelemetry=function(n,r){r=r||t;var e=i?i.identifier:"TelemetryPluginChain";je(r?r.core():null,function(){return e+":processTelemetry"},function(){if(i&&s){a._hasRun=!0;try{r.setNext(o),u&&i.setNextPlugin(o),o&&(o._hasRun=!1),i.processTelemetry(n,r)}catch(t){var e=o&&o._hasRun;o&&e||r.diagLog().throwInternal(ee.CRITICAL,ie.PluginException,"Plugin ["+i.identifier+"] failed during processTelemetry - "+t),o&&!e&&o.processTelemetry(n,r)}}else o&&(a._hasRun=!0,o.processTelemetry(n,r))},function(){return{item:n}},!n.sync)}},Ge=Y.isNullOrUndefined;function Be(e,t){var n=[];if(e&&0<e.length)for(var r=null,i=0;i<e.length;i++){var a=e[i];a&&Y.isFunction(a.processTelemetry)&&(a=new ze(a,t),n.push(a),r&&r.setNext(a),r=a)}return 0<n.length?n[0]:null}var We=function pr(e,i,n,t){var r,a,o,s,u=this,c=null;null!==t&&(e&&Y.isFunction(e.getPlugin)?c=function(e,t,n){var r=[],i=!n;if(e)for(;e;){var a=e.getPlugin();!i&&a!==n||(i=!0,r.push(a)),e=e.getNext()}return i||r.push(n),Be(r,t)}(e,u,t||e.getPlugin()):t?(r=u,o=e,s=!1,(a=t)&&e&&(o=[],Y.arrForEach(e,function(e){!s&&e!==a||(s=!0,o.push(e))})),a&&!s&&(o=o||[]).push(a),c=Be(o,r)):Y.isUndefined(t)&&(c=Be(e,u))),u.core=function(){return n},u.diagLog=function(){return(n||{}).logger||new qe(i||{})},u.getCfg=function(){return i},u.getExtCfg=function(e,t){var n,r;return void 0===t&&(t={}),!i||(r=i.extensionConfig)&&e&&(n=r[e]),n||t},u.getConfig=function(e,t,n){var r;return void 0===n&&(n=!1),(e=u.getExtCfg(e,null))&&!Ge(e[t])?r=e[t]:i&&!Ge(i[t])&&(r=i[t]),Ge(r)?n:r},u.hasNext=function(){return null!=c},u.getNext=function(){return c},u.setNext=function(e){c=e},u.processNext=function(e){var t=c;t&&(c=t.getNext(),t.processTelemetry(e,u))},u.createNew=function(e,t){return void 0===e&&(e=null),new pr(e||c,i,n,t)}},Xe=Y.isFunction,Ve="getPlugin",Ke=($e.prototype.initialize=function(e,t,n,r){this._baseTelInit(e,t,n,r)},$e);function $e(){var a=this,o=!1,s=null,u=null;a.core=null,a.diagLog=function(e){return a._getTelCtx(e).diagLog()},a.isInitialized=function(){return o},a.setInitialized=function(e){o=e},a.setNextPlugin=function(e){u=e},a.processNext=function(e,t){t?t.processNext(e):u&&Xe(u.processTelemetry)&&u.processTelemetry(e,null)},a._getTelCtx=function(e){void 0===e&&(e=null);var t=e;return t||(e=s||new We(null,{},a.core),t=u&&u[Ve]?e.createNew(null,u[Ve]):e.createNew(null,u)),t},a._baseTelInit=function(e,t,n,r){e&&(e.extensionConfig=e.extensionConfig||[]),!r&&t&&(r=t.getProcessTelContext().getNext());var i=u;u&&u[Ve]&&(i=u[Ve]()),a.core=t,s=new We(r,e,t,i),o=!0}}var Je=Y.isFunction,Qe="processTelemetry",Ye="priority",Ze="setNextPlugin",et="isInitialized";function tt(t,n){for(var e=[],r=null,i=t.getNext();i;){var a=i.getPlugin();a&&(r&&Je(r[Ze])&&Je(a[Qe])&&r[Ze](a),Je(a[et])&&a[et]()||e.push(a),r=a,i=i.getNext())}Y.arrForEach(e,function(e){e.initialize(t.getCfg(),t.core(),n,t.getNext())})}function nt(e){return e.sort(function(e,t){var n=0,r=Je(t[Qe]);return Je(e[Qe])?n=r?e[Ye]-t[Ye]:1:r&&(n=-1),n})}var rt,it=500,at="Channel has invalid priority",ot=Y.objDefineAccessors,st=(rt=Ke,__extends(ut,rt),ut._staticInit=(ot(ut.prototype,"ChannelControls",ut.prototype.getChannelControls),void ot(ut.prototype,"channelQueue",ut.prototype.getChannelControls)),ut);function ut(){var r=rt.call(this)||this;r.identifier="ChannelControllerPlugin",r.priority=it;var u,c=Y.arrForEach;function l(e){e&&0<e.length&&(e=e.sort(function(e,t){return e.priority-t.priority}),c(e,function(e){if(e.priority<it)throw Error(at+e.identifier)}),u.push(e))}return Me(ut,r,function(o,s){o.setNextPlugin=function(e){},o.processTelemetry=function(t,n){u&&c(u,function(e){0<e.length&&r._getTelCtx(n).createNew(e).processNext(t)})},o.getChannelControls=function(){return u},o.initialize=function(t,n,r){var e,i,a;o.isInitialized()||(s.initialize(t,n,r),t.isCookieUseDisabled&&Y.disableCookies(),i=r,u=[],(e=(t||{}).channels)&&c(e,l),i&&(a=[],c(i,function(e){e.priority>it&&a.push(e)}),l(a)),c(u,function(e){return tt(new We(e,t,n),r)}))}}),r}var ct=Y.arrForEach,lt=Y.isNullOrUndefined,ft="_notificationManager",dt=function gr(e){this.listeners=[];var a=Y.arrForEach,t=!!(e||{}).perfEvtsSendAll;Me(gr,this,function(i){i.addNotificationListener=function(e){i.listeners.push(e)},i.removeNotificationListener=function(e){for(var t=Y.arrIndexOf(i.listeners,e);-1<t;)i.listeners.splice(t,1),t=Y.arrIndexOf(i.listeners,e)},i.eventsSent=function(t){a(i.listeners,function(e){e&&e.eventsSent&&setTimeout(function(){return e.eventsSent(t)},0)})},i.eventsDiscarded=function(t,n){a(i.listeners,function(e){e&&e.eventsDiscarded&&setTimeout(function(){return e.eventsDiscarded(t,n)},0)})},i.eventsSendRequest=function(n,r){a(i.listeners,function(e){if(e&&e.eventsSendRequest)if(r)setTimeout(function(){return e.eventsSendRequest(n,r)},0);else try{e.eventsSendRequest(n,r)}catch(t){}})},i.perfEvent=function(n){n&&(!t&&n.isChildEvt()||a(i.listeners,function(e){if(e&&e.perfEvent)if(n.isAsync)setTimeout(function(){return e.perfEvent(n)},0);else try{e.perfEvent(n)}catch(t){}}))}})},pt=function hr(){var t,s,u,n,c=!1;Me(hr,this,function(o){o._extensions=[],s=new st,o.logger=Y.objCreate({throwInternal:function(e,t,n,r,i){void 0===i&&(i=!1)},warnToConsole:function(e){},resetInternalMessageCount:function(){}}),t=[],o.isInitialized=function(){return c},o.initialize=function(e,t,r,n){if(o.isInitialized())throw Error("Core should not be initialized more than once");if(!e||lt(e.instrumentationKey))throw Error("Please provide instrumentation key");u=n,o[ft]=n,o.config=e||{},e.extensions=lt(e.extensions)?[]:e.extensions,(e.extensionConfig=lt(e.extensionConfig)?{}:e.extensionConfig).NotificationManager=n,r&&(o.logger=r),(n=[]).push.apply(n,t.concat(e.extensions)),n=nt(n);var i=[],a={};if(ct(n,function(e){if(lt(e)||lt(e.initialize))throw Error("Extensions must provide callback to initialize");var t=e.priority,n=e.identifier;e&&t&&(lt(a[t])?a[t]=n:r.warnToConsole("Two extensions have same priority #"+t+" - "+a[t]+", "+n)),(!t||t<s.priority)&&i.push(e)}),n.push(s),i.push(s),n=nt(n),o._extensions=n,tt(new We([s],e,o),n),tt(new We(i,e,o),n),o._extensions=i,0===o.getTransmissionControls().length)throw Error("No channels available");c=!0,o.releaseQueue()},o.getTransmissionControls=function(){return s.getChannelControls()},o.track=function(e){e.iKey||(e.iKey=o.config.instrumentationKey),e.time||(e.time=Y.toISOString(new Date)),lt(e.ver)&&(e.ver="4.0"),o.isInitialized()?o.getProcessTelContext().processNext(e):t.push(e)},o.getProcessTelContext=function(){var e=o._extensions,t=e;return e&&0!==e.length||(t=[s]),new We(t,o.config,o)},o.getNotifyMgr=function(){return u||(u=Y.objCreate({addNotificationListener:function(e){},removeNotificationListener:function(e){},eventsSent:function(e){},eventsDiscarded:function(e,t){},eventsSendRequest:function(e,t){}}),o[ft]=u),u},o.getPerfMgr=function(){return n||o.config&&o.config.enablePerfMgr&&(n=new Oe(o.getNotifyMgr())),n},o.setPerfMgr=function(e){n=e},o.eventCnt=function(){return t.length},o.releaseQueue=function(){0<t.length&&(ct(t,function(e){o.getProcessTelContext().processNext(e)}),t=[])}})};__extends(function mr(){var e=pt.call(this)||this;return Me(mr,e,function(n,i){function t(e){var t=n.getNotifyMgr();t&&t.eventsDiscarded([e],l)}n.initialize=function(e,t,n,r){i.initialize(e,t,n||new qe(e),r||new dt(e))},n.track=function(e){je(n.getPerfMgr(),function(){return"AppInsightsCore:track"},function(){if(null===e)throw t(e),Error("Invalid telemetry item");!function(e){if(Y.isNullOrUndefined(e.name))throw t(e),Error("telemetry name required")}(e),i.track(e)},function(){return{item:e}},!e.sync)},n.addNotificationListener=function(e){var t=n.getNotifyMgr();t&&t.addNotificationListener(e)},n.removeNotificationListener=function(e){var t=n.getNotifyMgr();t&&t.removeNotificationListener(e)},n.pollInternalLogs=function(t){var e=n.config.diagnosticLogInterval;return e&&0<e||(e=1e4),setInterval(function(){var e=n.logger?n.logger.queue:[];Y.arrForEach(e,function(e){e={name:t||"InternalMessageId: "+e.messageId,iKey:n.config.instrumentationKey,time:Y.toISOString(new Date),baseType:Le.dataType,baseData:{message:e.message}},n.track(e)}),e.length=0},e)}}),e},pt);var gt="_aiHooks",ht=["req","rsp","hkErr","fnErr"],mt="__proto__",vt="constructor";function xt(e,t){if(e)for(var n=0;n<e.length&&!t(e[n],n);n++);}function yt(e,s,u,c,l){0<=l&&l<=2&&xt(e,function(e,t){var n=e.cbks,r=n[ht[l]];if(r){s.ctx=function(){return c[t]=c[t]||{}};try{r.apply(s.inst,u)}catch(a){e=s.err;try{var i=n[ht[2]];i&&(s.err=a,i.apply(s.inst,u))}catch(o){}finally{s.err=e}}}})}function St(u){return function(){var n=arguments,e=u.h,r={name:u.n,inst:this,ctx:null,set:function(e,t){(n=a([],n))[e]=t,i=a([r],n)}},t=[],i=a([r],n);function a(t,e){return xt(e,function(e){t.push(e)}),t}yt(e,r,i,t,0);var o=u.f;try{r.rslt=o.apply(this,n)}catch(s){throw r.err=s,yt(e,r,i,t,3),s}return yt(e,r,i,t,1),r.rslt}}var Ct=Object.getPrototypeOf;function It(e,t,n,r){if(void 0===r&&(r=!0),e&&t&&n&&((e=function a(e,t,n){var r=null;return e&&(Y.hasOwnProperty(e,t)?r=e:n&&(r=a(function(e){if(e){if(Ct)return Ct(e);if(e=e[mt]||e[q]||e[vt])return e}return null}(e),t,!1))),r}(e,t,r))&&typeof(r=e[t])===g)){var i=r[gt];return i||((r=St(i={i:0,n:t,f:r,h:[]}))[gt]=i,e[t]=r),n={id:i.i,cbks:n,rm:function(){var n=this.id;xt(i.h,function(e,t){return e.id===n&&(i.h.splice(t,1),1)})}},i.i++,i.h.push(n),n}return null}var Tt=(_t.requestContextHeader="Request-Context",_t.requestContextTargetKey="appId",_t.requestContextAppIdFormat="appId=cid-v1:",_t.requestIdHeader="Request-Id",_t.traceParentHeader="traceparent",_t.sdkContextHeader="Sdk-Context",_t.sdkContextHeaderAppIdRequest="appId",_t.requestContextHeaderLowerCase="request-context",_t);function _t(){}var Nt=(bt.sanitizeKeyAndAddUniqueness=function(e,t,n){var r=t.length,i=bt.sanitizeKey(e,t);if(i.length!==r){for(var a=0,o=i;n[o]!==undefined;)a++,o=i.substring(0,bt.MAX_NAME_LENGTH-3)+bt.padNumber(a);i=o}return i},bt.sanitizeKey=function(e,t){var n;return t&&(t=bt.trim(t.toString())).length>bt.MAX_NAME_LENGTH&&(n=t.substring(0,bt.MAX_NAME_LENGTH),e.throwInternal(ee.WARNING,ie.NameTooLong,"name is too long.  It has been truncated to "+bt.MAX_NAME_LENGTH+" characters.",{name:t},!0)),n||t},bt.sanitizeString=function(e,t,n){var r;return void 0===n&&(n=bt.MAX_STRING_LENGTH),t&&(n=n||bt.MAX_STRING_LENGTH,(t=bt.trim(t)).toString().length>n&&(r=t.toString().substring(0,n),e.throwInternal(ee.WARNING,ie.StringValueTooLong,"string value is too long. It has been truncated to "+n+" characters.",{value:t},!0))),r||t},bt.sanitizeUrl=function(e,t){return bt.sanitizeInput(e,t,bt.MAX_URL_LENGTH,ie.UrlTooLong)},bt.sanitizeMessage=function(e,t){var n;return t&&t.length>bt.MAX_MESSAGE_LENGTH&&(n=t.substring(0,bt.MAX_MESSAGE_LENGTH),e.throwInternal(ee.WARNING,ie.MessageTruncated,"message is too long, it has been truncated to "+bt.MAX_MESSAGE_LENGTH+" characters.",{message:t},!0)),n||t},bt.sanitizeException=function(e,t){var n;return t&&t.length>bt.MAX_EXCEPTION_LENGTH&&(n=t.substring(0,bt.MAX_EXCEPTION_LENGTH),e.throwInternal(ee.WARNING,ie.ExceptionTruncated,"exception is too long, it has been truncated to "+bt.MAX_EXCEPTION_LENGTH+" characters.",{exception:t},!0)),n||t},bt.sanitizeProperties=function(r,e){var i;return e&&(i={},Q(e,function(e,t){if(Y.isObject(t)&&_())try{t=N().stringify(t)}catch(n){r.throwInternal(ee.WARNING,ie.CannotSerializeObjectNonSerializable,"custom property is not valid",{exception:n},!0)}t=bt.sanitizeString(r,t,bt.MAX_PROPERTY_LENGTH),e=bt.sanitizeKeyAndAddUniqueness(r,e,i),i[e]=t}),e=i),e},bt.sanitizeMeasurements=function(n,e){var r;return e&&(r={},Q(e,function(e,t){e=bt.sanitizeKeyAndAddUniqueness(n,e,r),r[e]=t}),e=r),e},bt.sanitizeId=function(e,t){return t&&bt.sanitizeInput(e,t,bt.MAX_ID_LENGTH,ie.IdTooLong).toString()},bt.sanitizeInput=function(e,t,n,r){var i;return t&&(t=bt.trim(t)).length>n&&(i=t.substring(0,n),e.throwInternal(ee.WARNING,r,"input is too long, it has been truncated to "+n+" characters.",{data:t},!0)),i||t},bt.padNumber=function(e){return(e="00"+e).substr(e.length-3)},bt.trim=function(e){return Y.isString(e)?e.replace(/^\s+|\s+$/g,""):e},bt.MAX_NAME_LENGTH=150,bt.MAX_ID_LENGTH=128,bt.MAX_PROPERTY_LENGTH=8192,bt.MAX_STRING_LENGTH=1024,bt.MAX_URL_LENGTH=2048,bt.MAX_MESSAGE_LENGTH=32768,bt.MAX_EXCEPTION_LENGTH=32768,bt);function bt(){}var At=T(),wt=Y.isString,Et=null,Mt=(Dt.createDomEvent=function(e){var t,n=null;return Y.isFunction(Event)?n=new Event(e):(t=I())&&t.createEvent&&(n=t.createEvent("Event")).initEvent(e,!0,!0),n},Dt.disableStorage=function(){Dt._canUseLocalStorage=!1,Dt._canUseSessionStorage=!1},Dt._getLocalStorageObject=function(){return Dt.canUseLocalStorage()?Dt._getVerifiedStorageObject(u.LocalStorage):null},Dt._getVerifiedStorageObject=function(e){var t,n,r=null;try{if(Y.isNullOrUndefined(k()))return null;n=new Date,(r=y(e===u.LocalStorage?"localStorage":"sessionStorage")).setItem(n.toString(),n.toString()),t=r.getItem(n.toString())!==n.toString(),r.removeItem(n.toString()),t&&(r=null)}catch(i){r=null}return r},Dt.isInternalApplicationInsightsEndpoint=function(e){return!!~Dt._internalEndpoints.indexOf(e.toLowerCase())},Dt.canUseLocalStorage=function(){return Dt._canUseLocalStorage===undefined&&(Dt._canUseLocalStorage=!!Dt._getVerifiedStorageObject(u.LocalStorage)),Dt._canUseLocalStorage},Dt.getStorage=function(e,t){var n=Dt._getLocalStorageObject();if(null!==n)try{return n.getItem(t)}catch(r){Dt._canUseLocalStorage=!1,e.throwInternal(ee.WARNING,ie.BrowserCannotReadLocalStorage,"Browser failed read of local storage. "+Dt.getExceptionName(r),{exception:Dt.dump(r)})}return null},Dt.setStorage=function(e,t,n){var r=Dt._getLocalStorageObject();if(null!==r)try{return r.setItem(t,n),!0}catch(i){Dt._canUseLocalStorage=!1,e.throwInternal(ee.WARNING,ie.BrowserCannotWriteLocalStorage,"Browser failed write to local storage. "+Dt.getExceptionName(i),{exception:Dt.dump(i)})}return!1},Dt.removeStorage=function(e,t){var n=Dt._getLocalStorageObject();if(null!==n)try{return n.removeItem(t),!0}catch(r){Dt._canUseLocalStorage=!1,e.throwInternal(ee.WARNING,ie.BrowserFailedRemovalFromLocalStorage,"Browser failed removal of local storage item. "+Dt.getExceptionName(r),{exception:Dt.dump(r)})}return!1},Dt._getSessionStorageObject=function(){return Dt.canUseSessionStorage()?Dt._getVerifiedStorageObject(u.SessionStorage):null},Dt.canUseSessionStorage=function(){return Dt._canUseSessionStorage===undefined&&(Dt._canUseSessionStorage=!!Dt._getVerifiedStorageObject(u.SessionStorage)),Dt._canUseSessionStorage},Dt.getSessionStorageKeys=function(){var t=[];return Dt.canUseSessionStorage()&&Q(y("sessionStorage"),function(e){t.push(e)}),t},Dt.getSessionStorage=function(e,t){var n=Dt._getSessionStorageObject();if(null!==n)try{return n.getItem(t)}catch(r){Dt._canUseSessionStorage=!1,e.throwInternal(ee.WARNING,ie.BrowserCannotReadSessionStorage,"Browser failed read of session storage. "+Dt.getExceptionName(r),{exception:Dt.dump(r)})}return null},Dt.setSessionStorage=function(e,t,n){var r=Dt._getSessionStorageObject();if(null!==r)try{return r.setItem(t,n),!0}catch(i){Dt._canUseSessionStorage=!1,e.throwInternal(ee.WARNING,ie.BrowserCannotWriteSessionStorage,"Browser failed write to session storage. "+Dt.getExceptionName(i),{exception:Dt.dump(i)})}return!1},Dt.removeSessionStorage=function(e,t){var n=Dt._getSessionStorageObject();if(null!==n)try{return n.removeItem(t),!0}catch(r){Dt._canUseSessionStorage=!1,e.throwInternal(ee.WARNING,ie.BrowserFailedRemovalFromSessionStorage,"Browser failed removal of session storage item. "+Dt.getExceptionName(r),{exception:Dt.dump(r)})}return!1},Dt.disableCookies=function(){Y.disableCookies()},Dt.canUseCookies=function(e){if(Y._canUseCookies===undefined){Y._canUseCookies=!1;try{Y._canUseCookies=Dt.document.cookie!==undefined}catch(t){e.throwInternal(ee.WARNING,ie.CannotAccessCookie,"Cannot access document.cookie - "+Dt.getExceptionName(t),{exception:Dt.dump(t)})}}return Y._canUseCookies},Dt.disallowsSameSiteNone=function(e){return!(!wt(e)||!~e.indexOf("CPU iPhone OS 12")&&!~e.indexOf("iPad; CPU OS 12")&&!(~e.indexOf("Macintosh; Intel Mac OS X 10_14")&&~e.indexOf("Version/")&&~e.indexOf("Safari"))&&(!~e.indexOf("Macintosh; Intel Mac OS X 10_14")||(n=(t=e.length)-40,"AppleWebKit/605.1.15 (KHTML, like Gecko)"!=e.substring(0<=n?n:0,t)))&&!~e.indexOf("Chrome/5")&&!~e.indexOf("Chrome/6")&&(!~e.indexOf("UnrealEngine")||~e.indexOf("Chrome"))&&!~e.indexOf("UCBrowser/12")&&!~e.indexOf("UCBrowser/11"));var t,n},Dt.setCookie=function(e,t,n,r){var i;Dt.canUseCookies(e)&&(e=i="",r&&(i=";domain="+r),(r=F())&&"https:"===r.protocol&&(e=";secure",null===Et&&(Et=Dt.disallowsSameSiteNone((T()||{}).userAgent)),Et||(n+=";SameSite=None")),Dt.document.cookie=t+"="+n+i+";path=/"+e)},Dt.stringToBoolOrDefault=function(e,t){return void 0===t&&(t=!1),e===undefined||null===e?t:"true"==e.toString().toLowerCase()},Dt.getCookie=function(e,t){if(Dt.canUseCookies(e)){var n="";if(t&&t.length)for(var r=t+"=",i=Dt.document.cookie.split(";"),a=0;a<i.length;a++){var o=i[a];if((o=Dt.trim(o))&&!o.indexOf(r)){n=o.substring(r.length,i[a].length);break}}return n}},Dt.deleteCookie=function(e,t){Dt.canUseCookies(e)&&(Dt.document.cookie=t+"=;path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;")},Dt.random32=function(){return Y.random32(!0)},Dt.getIEVersion=function(e){return void 0===e&&(e=null),~(e=e?e.toLowerCase():At?(At.userAgent||"").toLowerCase():"").indexOf("msie")?parseInt(e.split("msie")[1]):e.indexOf("trident/")&&(e=parseInt(e.split("trident/")[1]))?e+4:null},Dt.msToTimeSpan=function(e){(isNaN(e)||e<0)&&(e=0);var t=""+(e=Math.round(e))%1e3,n=""+Math.floor(e/1e3)%60,r=""+Math.floor(e/6e4)%60,i=""+Math.floor(e/36e5)%24,e=Math.floor(e/864e5),t=1===t.length?"00"+t:2===t.length?"0"+t:t,n=n.length<2?"0"+n:n,r=r.length<2?"0"+r:r;return(0<e?e+".":"")+(i=i.length<2?"0"+i:i)+":"+r+":"+n+"."+t},Dt.isCrossOriginError=function(e,t,n,r,i){return("Script error."===e||"Script error"===e)&&!i},Dt.dump=function(e){var t=Object[q].toString.call(e),n="";return"[object Error]"===t?n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":_()&&(n=N().stringify(e)),t+n},Dt.getExceptionName=function(e){return"[object Error]"===Object[q].toString.call(e)?e.name:""},Dt.addEventHandler=function(e,t){return ne.Attach(C(),e,t)},Dt.IsBeaconApiSupported=function(){return"sendBeacon"in At&&At.sendBeacon},Dt.getExtension=function(e,t){for(var n=null,r=0;!n&&r<e.length;)e[r]&&e[r].identifier===t&&(n=e[r]),r++;return n},Dt.document=I()||{},Dt._canUseLocalStorage=undefined,Dt._canUseSessionStorage=undefined,Dt._internalEndpoints=["https://dc.services.visualstudio.com/v2/track","https://breeze.aimon.applicationinsights.io/v2/track","https://dc-int.services.visualstudio.com/v2/track"],Dt.NotSpecified="not_specified",Dt.trim=Y.strTrim,Dt.newId=Y.newId,Dt.generateW3CId=Y.generateW3CId,Dt.isArray=Y.isArray,Dt.isError=Y.isError,Dt.isDate=Y.isDate,Dt.toISOStringForIE8=Y.toISOString,Dt);function Dt(){}var Lt=(Rt.parseUrl=function(e){var t=Rt._htmlAnchorIdx,n=Rt._htmlAnchorElement,r=n[t];return Rt.document.createElement?n[t]||(r=n[t]=Rt.document.createElement("a")):r={host:Rt.parseHost(e,!0)},r.href=e,++t>=n.length&&(t=0),Rt._htmlAnchorIdx=t,r},Rt.getAbsoluteUrl=function(e){var t;return(e=Rt.parseUrl(e))&&(t=e.href),t},Rt.getPathName=function(e){var t;return(e=Rt.parseUrl(e))&&(t=e.pathname),t},Rt.getCompleteUrl=function(e,t){return e?e.toUpperCase()+" "+t:t},Rt.parseHost=function(e,t){return(e=Rt.parseFullHost(e,t))&&null!=(t=e.match(/(www[0-9]?\.)?(.[^/:]+)(\:[\d]+)?/i))&&3<t.length&&wt(t[2])&&0<t[2].length?t[2]+(t[3]||""):e},Rt.parseFullHost=function(e,t){var n=null;return!e||null!=(e=e.match(/(\w*):\/\/(.[^/:]+)(\:[\d]+)?/i))&&2<e.length&&wt(e[2])&&0<e[2].length&&(n=e[2]||"",t&&2<e.length&&(t=(e[1]||"").toLowerCase(),e=e[3]||"",("http"==t&&":80"===e||"https"==t&&":443"===e)&&(e=""),n+=e)),n},Rt.document=I()||{},Rt._htmlAnchorIdx=0,Rt._htmlAnchorElement=[null,null,null,null,null],Rt);function Rt(){}var qt=(kt.canIncludeCorrelationHeader=function(e,t,n){if(!t||e&&e.disableCorrelationHeaders)return!1;if(e&&e.correlationHeaderExcludePatterns)for(var r=0;r<e.correlationHeaderExcludePatterns.length;r++)if(e.correlationHeaderExcludePatterns[r].test(t))return!1;var i,a=Lt.parseUrl(t).host.toLowerCase();if(a&&(~a.indexOf(":443")||~a.indexOf(":80"))&&(a=(Lt.parseFullHost(t,!0)||"").toLowerCase()),!(e&&e.enableCorsCorrelation||a===n))return!1;if((n=e&&e.correlationHeaderDomains)&&(Y.arrForEach(n,function(e){e=RegExp(e.toLowerCase().replace(/\./g,".").replace(/\*/g,".*")),i=i||e.test(a)}),!i))return!1;var o=e&&e.correlationHeaderExcludedDomains;if(!o||0===o.length)return!0;for(r=0;r<o.length;r++)if(RegExp(o[r].toLowerCase().replace(/\./g,".").replace(/\*/g,".*")).test(a))return!1;return a&&0<a.length},kt.getCorrelationContext=function(e){if((e=e&&kt.getCorrelationContextValue(e,Tt.requestContextTargetKey))&&e!==kt.correlationIdPrefix)return e},kt.getCorrelationContextValue=function(e,t){if(e)for(var n=e.split(","),r=0;r<n.length;++r){var i=n[r].split("=");if(2===i.length&&i[0]===t)return i[1]}},kt.correlationIdPrefix="cid-v1:",kt);function kt(){}var Ft=(Ht.ParseDependencyPath=function(e,t,n,r){var i,a,o,s=r,u=r,s=t&&0<t.length?(o=(i=Lt.parseUrl(t)).host,s||(null!=i.pathname?("/"!=(a=0===i.pathname.length?"/":i.pathname)[0]&&(a="/"+a),u=i.pathname,Nt.sanitizeString(e,n?n+" "+a:a)):Nt.sanitizeString(e,t))):o=r;return{target:o,name:s,data:u}},Ht);function Ht(){}var Ot=(Pt.Now=function(){var e=H();return e&&e.now&&e.timing&&0<(e=e.now()+e.timing.navigationStart)?e:(new Date).getTime()},Pt.GetDuration=function(e,t){var n=null;return 0===e||0===t||Y.isNullOrUndefined(e)||Y.isNullOrUndefined(t)||(n=t-e),n},Pt);function Pt(){}var jt,Ut="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",zt=(__extends(Gt,function(){}),Gt);function Gt(){return this}jt=function(){this.ver=1,this.sampleRate=100,this.tags={}},__extends(function(e,t,n){var r=jt.call(this)||this;return r.name=Nt.sanitizeString(e,n)||Mt.NotSpecified,r.data=t,r.time=Y.toISOString(new Date),r.aiDataContract={time:p.Required,iKey:p.Required,name:p.Required,sampleRate:function(){return 100===r.sampleRate?p.Hidden:p.Required},tags:p.Required,data:p.Required},r},jt);var Bt,Wt,Xt=(Bt=wn=function(){},__extends(Vt,Bt),Vt);function Vt(){var e=Bt.call(this)||this;return e.ver=2,e.properties={},e.measurements={},e}function Kt(e,t,n,r){var i=Wt.call(this)||this;return i.aiDataContract={ver:p.Required,name:p.Required,properties:p.Default,measurements:p.Default},i.name=Nt.sanitizeString(e,t)||Mt.NotSpecified,i.properties=Nt.sanitizeProperties(e,n),i.measurements=Nt.sanitizeMeasurements(e,r),i}Wt=Xt,__extends(Kt,Wt),Kt.envelopeType="Microsoft.ApplicationInsights.{0}.Event",Kt.dataType="EventData";var $t,Jt=function(){},Qt=($t=wn,__extends(Yt,$t),Yt);function Yt(){var e=$t.call(this)||this;return e.ver=2,e.exceptions=[],e.properties={},e.measurements={},e}var Zt,ot=function(){this.hasFullStack=!0,this.parsedStack=[]},en="error";function tn(e,t,n,r,i,a){var o,s=Zt.call(this)||this;return s.aiDataContract={ver:p.Required,exceptions:p.Required,severityLevel:p.Default,properties:p.Default,measurements:p.Default},"ver"in(o=t)&&"exceptions"in o&&"properties"in o?(s.exceptions=t.exceptions,s.properties=t.properties,s.measurements=t.measurements,t.severityLevel&&(s.severityLevel=t.severityLevel),t.id&&(s.id=t.id),t.problemGroup&&(s.problemGroup=t.problemGroup),s.ver=2,Y.isNullOrUndefined(t.isManual)||(s.isManual=t.isManual)):(s.exceptions=[new rn(e,t)],s.properties=Nt.sanitizeProperties(e,n)||{},s.measurements=Nt.sanitizeMeasurements(e,r),i&&(s.severityLevel=i),a&&(s.id=a)),s}Zt=Qt,__extends(tn,Zt),tn.CreateFromInterface=function(t,e,n,r){var i=e.exceptions&&Y.arrMap(e.exceptions,function(e){return rn.CreateFromInterface(t,e)});return new tn(t,__assign({},e,{exceptions:i}),n,r)},tn.prototype.toInterface=function(){var e=this.exceptions,t=this.properties,n=this.measurements,r=this.severityLevel,i=(this.ver,this.problemGroup),a=this.id,o=this.isManual;return{ver:"4.0",exceptions:e instanceof Array&&Y.arrMap(e,function(e){return e.toInterface()})||undefined,severityLevel:r,properties:t,measurements:n,problemGroup:i,id:a,isManual:o}},tn.CreateSimpleException=function(e,t,n,r,i,a){return{exceptions:[{hasFullStack:!0,message:e,stack:i,typeName:t}]}},tn.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",tn.dataType="ExceptionData";var nn,rn=(nn=ot,__extends(an,nn),an.prototype.toInterface=function(){var e=this.parsedStack instanceof Array&&Y.arrMap(this.parsedStack,function(e){return e.toInterface()});return{id:this.id,outerId:this.outerId,typeName:this.typeName,message:this.message,hasFullStack:this.hasFullStack,stack:this.stack,parsedStack:e||undefined}},an.CreateFromInterface=function(e,t){var n=t.parsedStack instanceof Array&&Y.arrMap(t.parsedStack,function(e){return sn.CreateFromInterface(e)})||t.parsedStack;return new an(e,__assign({},t,{parsedStack:n}))},an.parseStack=function(e){if(Y.isString(e)){for(var t=e.split("\n"),n=[],r=0,i=0,a=0;a<=t.length;a++){var o=t[a];sn.regex.test(o)&&(i+=(o=new sn(t[a],r++)).sizeInBytes,n.push(o))}if(32768<i)for(var s=0,u=n.length-1,c=0,l=s,f=u;s<u;){if(32768<(c+=n[s].sizeInBytes+n[u].sizeInBytes)){var d=f-l+1;n.splice(l,d);break}l=s,f=u,s++,u--}}return n},an);function an(e,t){var n,r=nn.call(this)||this;return r.aiDataContract={id:p.Default,outerId:p.Default,typeName:p.Required,message:p.Required,hasFullStack:p.Default,stack:p.Default,parsedStack:p.Array},"hasFullStack"in(n=t)&&"typeName"in n?(r.typeName=t.typeName,r.message=t.message,r.stack=t.stack,r.parsedStack=t.parsedStack,r.hasFullStack=t.hasFullStack):(n=t,Mt.isError(n)||(n=n[en]||n.evt||n),r.typeName=Nt.sanitizeString(e,function(e){var t="";if(e&&!(t=e.typeName||e.name||""))try{var n=/function (.{1,})\(/.exec(e.constructor.toString()),t=n&&1<n.length?n[1]:""}catch(r){}return t}(n))||Mt.NotSpecified,r.message=Nt.sanitizeMessage(e,t.message)||Mt.NotSpecified,t=t.stack,r.parsedStack=an.parseStack(t),r.stack=Nt.sanitizeException(e,t),r.hasFullStack=Mt.isArray(r.parsedStack)&&0<r.parsedStack.length),r}var on,sn=(on=Jt,__extends(un,on),un.CreateFromInterface=function(e){return new un(e,null)},un.prototype.toInterface=function(){return{level:this.level,method:this.method,assembly:this.assembly,fileName:this.fileName,line:this.line}},un.regex=/^([\s]+at)?(.*?)(\@|\s\(|\s)([^\(\@\n]+):([0-9]+):([0-9]+)(\)?)$/,un.baseSize=58,un);function un(e,t){var n,r=on.call(this)||this;return r.sizeInBytes=0,r.aiDataContract={level:p.Required,method:p.Required,assembly:p.Default,fileName:p.Default,line:p.Default},"string"==typeof e?(n=e,r.level=t,r.method="<no_method>",r.assembly=Mt.trim(n),r.fileName="",r.line=0,(n=n.match(un.regex))&&5<=n.length&&(r.method=Mt.trim(n[2])||r.method,r.fileName=Mt.trim(n[4]),r.line=parseInt(n[5])||0)):(r.level=e.level,r.method=e.method,r.assembly=e.assembly,r.fileName=e.fileName,r.line=e.line,r.sizeInBytes=0),r.sizeInBytes+=r.method.length,r.sizeInBytes+=r.fileName.length,r.sizeInBytes+=r.assembly.length,r.sizeInBytes+=un.baseSize,r.sizeInBytes+=r.level.toString().length,r.sizeInBytes+=r.line.toString().length,r}var cn,ln,ot=(cn=wn,__extends(fn,cn),fn);function fn(){var e=cn.call(this)||this;return e.ver=2,e.metrics=[],e.properties={},e.measurements={},e}(Jt=ln={})[Jt.Measurement=0]="Measurement",Jt[Jt.Aggregation=1]="Aggregation";var dn,pn,gn=(dn=function(){this.kind=ln.Measurement},__extends(hn,dn),hn);function hn(){var e=dn.apply(this,arguments)||this;return e.aiDataContract={name:p.Required,kind:p.Default,value:p.Required,count:p.Default,min:p.Default,max:p.Default,stdDev:p.Default},e}function mn(e,t,n,r,i,a,o,s){var u=pn.call(this)||this;u.aiDataContract={ver:p.Required,metrics:p.Required,properties:p.Default};var c=new gn;return c.count=0<r?r:undefined,c.max=isNaN(a)||null===a?undefined:a,c.min=isNaN(i)||null===i?undefined:i,c.name=Nt.sanitizeString(e,t)||Mt.NotSpecified,c.value=n,u.metrics=[c],u.properties=Nt.sanitizeProperties(e,o),u.measurements=Nt.sanitizeMeasurements(e,s),u}pn=ot,__extends(mn,pn),mn.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",mn.dataType="MetricData";var vn,xn,ot=(vn=Xt,__extends(yn,vn),yn);function yn(){var e=vn.call(this)||this;return e.ver=2,e.properties={},e.measurements={},e}function Sn(e,t,n,r,i,a,o){var s=xn.call(this)||this;return s.aiDataContract={ver:p.Required,name:p.Default,url:p.Default,duration:p.Default,properties:p.Default,measurements:p.Default,id:p.Default},s.id=Nt.sanitizeId(e,o),s.url=Nt.sanitizeUrl(e,n),s.name=Nt.sanitizeString(e,t)||Mt.NotSpecified,isNaN(r)||(s.duration=Mt.msToTimeSpan(r)),s.properties=Nt.sanitizeProperties(e,i),s.measurements=Nt.sanitizeMeasurements(e,a),s}xn=ot,__extends(Sn,xn),Sn.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",Sn.dataType="PageviewData";var Cn,Xt=(Cn=wn,__extends(In,Cn),In);function In(){var e=Cn.call(this)||this;return e.ver=2,e.success=!0,e.properties={},e.measurements={},e}var Tn,_n=(Tn=Xt,__extends(Nn,Tn),Nn.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",Nn.dataType="RemoteDependencyData",Nn);function Nn(e,t,n,r,i,a,o,s,u,c,l,f){void 0===u&&(u="Ajax");var d=Tn.call(this)||this;return d.aiDataContract={id:p.Required,ver:p.Required,name:p.Default,resultCode:p.Default,duration:p.Default,success:p.Default,data:p.Default,target:p.Default,type:p.Default,properties:p.Default,measurements:p.Default,kind:p.Default,value:p.Default,count:p.Default,min:p.Default,max:p.Default,stdDev:p.Default,dependencyKind:p.Default,dependencySource:p.Default,commandName:p.Default,dependencyTypeName:p.Default},d.id=t,d.duration=Mt.msToTimeSpan(i),d.success=a,d.resultCode=o+"",d.type=Nt.sanitizeString(e,u),s=Ft.ParseDependencyPath(e,n,s,r),d.data=Nt.sanitizeUrl(e,r)||s.data,d.target=Nt.sanitizeString(e,s.target),c&&(d.target=d.target+" | "+c),d.name=Nt.sanitizeString(e,s.name),d.properties=Nt.sanitizeProperties(e,l),d.measurements=Nt.sanitizeMeasurements(e,f),d}var bn,An,wn=(bn=wn,__extends(En,bn),En);function En(){var e=bn.call(this)||this;return e.ver=2,e.properties={},e.measurements={},e}function Mn(e,t,n,r,i){var a=An.call(this)||this;return a.aiDataContract={ver:p.Required,message:p.Required,severityLevel:p.Default,properties:p.Default},t=t||Mt.NotSpecified,a.message=Nt.sanitizeMessage(e,t),a.properties=Nt.sanitizeProperties(e,r),a.measurements=Nt.sanitizeMeasurements(e,i),n&&(a.severityLevel=n),a}An=wn,__extends(Mn,An),Mn.envelopeType="Microsoft.ApplicationInsights.{0}.Message",Mn.dataType="MessageData";var Dn,Ln,Rn,ot=(Dn=ot,__extends(qn,Dn),qn);function qn(){var e=Dn.call(this)||this;return e.ver=2,e.properties={},e.measurements={},e}function kn(e,t,n,r,i,a,o){var s=Ln.call(this)||this;return s.aiDataContract={ver:p.Required,name:p.Default,url:p.Default,duration:p.Default,perfTotal:p.Default,networkConnect:p.Default,sentRequest:p.Default,receivedResponse:p.Default,domProcessing:p.Default,properties:p.Default,measurements:p.Default},s.url=Nt.sanitizeUrl(e,n),s.name=Nt.sanitizeString(e,t)||Mt.NotSpecified,s.properties=Nt.sanitizeProperties(e,i),s.measurements=Nt.sanitizeMeasurements(e,a),o&&(s.domProcessing=o.domProcessing,s.duration=o.duration,s.networkConnect=o.networkConnect,s.perfTotal=o.perfTotal,s.receivedResponse=o.receivedResponse,s.sentRequest=o.sentRequest),s}Ln=ot,__extends(kn,Ln),kn.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",kn.dataType="PageviewPerformanceData",Rn=zt,__extends(function(e,t){var n=Rn.call(this)||this;return n.aiDataContract={baseType:p.Required,baseData:p.Required},n.baseType=e,n.baseData=t,n},Rn),(zt={})[zt.Verbose=0]="Verbose",zt[zt.Information=1]="Information",zt[zt.Warning=2]="Warning",zt[zt.Error=3]="Error",zt[zt.Critical=4]="Critical";var Fn=(Hn.create=function(e,t,n,r,i,a){if(n=Nt.sanitizeString(r,n)||Mt.NotSpecified,Y.isNullOrUndefined(e)||Y.isNullOrUndefined(t)||Y.isNullOrUndefined(n))throw Error("Input doesn't contain all required fields");var o={name:n,time:Y.toISOString(new Date),iKey:"",ext:a||{},tags:[],data:{},baseType:t,baseData:e};return Y.isNullOrUndefined(i)||Q(i,function(e,t){o.data[e]=t}),o},Hn);function Hn(){}var On="AppInsightsPropertiesPlugin",Pn="properties",jn=Y.objKeys,Un=Y.arrForEach;function zn(e,t,n){var r=0,t=e[t],n=e[n];return t&&n&&(r=Ot.GetDuration(t,n)),r}function Gn(e,t,n,r,i){var a=0;return(i=zn(n,r,i))&&(a=Bn(e,t,Mt.msToTimeSpan(i))),a}function Bn(e,t,n){var r="ajaxPerf",i=0;return e&&t&&n&&((e[r]=e[r]||{})[t]=n,i=1),i}var Wn=function(){var e=this;e.openDone=!1,e.setRequestHeaderDone=!1,e.sendDone=!1,e.abortDone=!1,e.stateChangeAttached=!1},Xn=function vr(e,t,n){var r=this,i=n,y="responseText";r.perfMark=null,r.completed=!1,r.requestHeadersSize=null,r.requestHeaders=null,r.responseReceivingDuration=null,r.callbackDuration=null,r.ajaxTotalDuration=null,r.aborted=0,r.pageUrl=null,r.requestUrl=null,r.requestSize=0,r.method=null,r.status=null,r.requestSentTime=null,r.responseStartedTime=null,r.responseFinishedTime=null,r.callbackFinishedTime=null,r.endTime=null,r.xhrMonitoringState=new Wn,r.clientFailure=0,r.traceID=e,r.spanID=t,Me(vr,r,function(x){x.getAbsoluteUrl=function(){return x.requestUrl?Lt.getAbsoluteUrl(x.requestUrl):null},x.getPathName=function(){return x.requestUrl?Nt.sanitizeUrl(i,Lt.getCompleteUrl(x.method,x.requestUrl)):null},x.CreateTrackItem=function(e,t,n){return x.ajaxTotalDuration=Math.round(1e3*Ot.GetDuration(x.requestSentTime,x.responseFinishedTime))/1e3,x.ajaxTotalDuration<0?null:((e={id:"|"+x.traceID+"."+x.spanID,target:x.getAbsoluteUrl(),name:x.getPathName(),type:e,duration:x.ajaxTotalDuration,success:200<=+x.status&&+x.status<400,responseCode:+x.status,method:x.method})[Pn]={HttpMethod:x.method},i=e,o=(r=x).perfTiming,s=i[Pn]||{},u=0,c=Y.isString,l="startTime",f="connect"+"End",d="request"+"Start",p="response"+"End",g="transferSize",h="encodedBodySize",m="decodedBodySize",v="serverTiming",o?(u|=Gn(s,"End",o,"redirectStart","End"),u|=Gn(s,"domainLookup",o,"domainLookupStart","domainLookupEnd"),u|=Gn(s,"connect",o,"connectStart",f),u|=Gn(s,"request",o,d,"requestEnd"),u|=Gn(s,"response",o,"responseStart",p),u|=Gn(s,"networkConnect",o,l,f),u|=Gn(s,"sentRequest",o,d,p),u|=Bn(s,"duration",p=o.duration||zn(o,l,p)||0),u|=Bn(s,"perfTotal",p),(p=o[v])&&(a={},Un(p,function(e,t){var n,r,t=(n=e.name||""+t,(r=/([^\w\d_$])/g).test(t=n)&&(t=n.replace(r,"_")),t),i=a[t]||{};Q(e,function(e,t){("name"!==e&&c(t)||Y.isNumber(t))&&(i[e]&&(t=i[e]+";"+t),!t&&c(t)||(i[e]=t))}),a[t]=i}),u|=Bn(s,v,a)),u|=Bn(s,g,o[g]),u|=Bn(s,h,o[h]),u|=Bn(s,m,o[m])):r.perfMark&&(u|=Bn(s,"missing",r.perfAttempts)),u&&(i[Pn]=s),t&&0<jn(x.requestHeaders).length&&(e[Pn]=e[Pn]||{},e[Pn].requestHeaders=x.requestHeaders),!n||(t=n())&&((n=t.correlationContext)&&(e.correlationContext=n),t.headerMap&&0<jn(t.headerMap).length&&(e[Pn]=e[Pn]||{},e[Pn].responseHeaders=t.headerMap),400<=x.status&&(n=t.type,e[Pn]=e[Pn]||{},""!==n&&"text"!==n||(e[Pn][y]=t[y]?t.statusText+" - "+t[y]:t.statusText),"json"===n&&(e[Pn][y]=t.response?t.statusText+" - "+JSON.stringify(t.response):t.statusText))),e);var r,i,a,o,s,u,c,l,f,d,p,g,h,m,v}})},Vn=(Kn.isValidTraceId=function(e){return e.match(/^[0-9a-f]{32}$/)&&"00000000000000000000000000000000"!==e},Kn.isValidSpanId=function(e){return e.match(/^[0-9a-f]{16}$/)&&"0000000000000000"!==e},Kn.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},Kn.DEFAULT_TRACE_FLAG="01",Kn.DEFAULT_VERSION="00",Kn);function Kn(e,t){var n=this;n.traceFlag=Kn.DEFAULT_TRACE_FLAG,n.version=Kn.DEFAULT_VERSION,e&&Kn.isValidTraceId(e)?n.traceId=e:n.traceId=Mt.generateW3CId(),t&&Kn.isValidSpanId(t)?n.spanId=t:n.spanId=Mt.generateW3CId().substr(0,16)}var $n="ai.ajxmn.",Jn="diagLog",Qn="ajaxData",Yn="throwInternal",Zn="fetch",er=Y.isNullOrUndefined,tr=Y.arrForEach,nr=0;function rr(e){var t=!1;typeof XMLHttpRequest===f||er(XMLHttpRequest)||(n=XMLHttpRequest[q],t=!(er(n)||er(n.open)||er(n.send)||er(n.abort)));var n=Mt.getIEVersion();if(n&&n<9&&(t=!1),t)try{(new XMLHttpRequest)[Qn]={};var r=XMLHttpRequest[q].open;XMLHttpRequest[q].open=r}catch(i){t=!1,ar(e,ie.FailedMonitorAjaxOpen,"Failed to enable XMLHttpRequest monitoring, extension is not supported",{exception:Mt.dump(i)})}return t}function ir(e){var t="";try{er(e)||er(e[Qn])||er(e[Qn].requestUrl)||(t+="(url: '"+e[Qn].requestUrl+"')")}catch(n){}return t}function ar(e,t,n,r,i){e[Jn]()[Yn](ee.CRITICAL,t,n,r,i)}function or(e,t,n,r,i){e[Jn]()[Yn](ee.WARNING,t,n,r,i)}function sr(t,n,r){return function(e){ar(t,n,r,{ajaxDiagnosticsMessage:ir(e.inst),exception:Mt.dump(e.err)})}}function ur(e,t){return e&&t?e.indexOf(t):-1}var cr,Ke=(cr=Ke,__extends(lr,cr),lr.getDefaultConfig=function(){return{maxAjaxCallsPerView:500,disableAjaxTracking:!1,disableFetchTracking:!0,disableCorrelationHeaders:!1,distributedTracingMode:R.AI,correlationHeaderExcludedDomains:["*.blob.core.windows.net","*.blob.core.chinacloudapi.cn","*.blob.core.cloudapi.de","*.blob.core.usgovcloudapi.net"],correlationHeaderDomains:undefined,appId:undefined,enableCorsCorrelation:!1,enableRequestHeaderTracking:!1,enableResponseHeaderTracking:!1,enableAjaxErrorStatusText:!1,enableAjaxPerfTracking:!1,maxAjaxPerfLookupAttempts:3,ajaxPerfLookupDelay:25}},lr.getEmptyConfig=function(){var t=this.getDefaultConfig();return Q(t,function(e){t[e]=undefined}),t},lr.prototype.processTelemetry=function(e,t){this.processNext(e,t)},lr.identifier="AjaxDependencyPlugin",lr);function lr(){var e=cr.call(this)||this;e.identifier=lr.identifier,e.priority=120;var x,y,S,C,I,T,_="trackDependencyDataInternal",t=F(),N=!1,b=!1,A=t&&t.host&&t.host.toLowerCase(),w=lr.getEmptyConfig(),E=!1,r=0,M=0,D=[],L={};return Me(lr,e,function(c,l){function f(e,t,n){D.push(e?It(e[q],t,n,!1):null)}function d(e,t,n){var r=!1,i=((Y.isString(t)?t:(t||{}).url||"")||"").toLowerCase(),a=ur(i,"?"),o=ur(i,"#");return(-1===a||-1!==o&&o<a)&&(a=o),-1!==a&&(i=i.substring(0,a)),er(e)?er(t)||(r="object"==typeof t&&!0===t[Ut]||!!n&&!0===n[Ut]):r=!0===e[Ut]||!0===i[Ut],r?L[i]||(L[i]=1):L[i]&&(r=!0),r}function p(e,t){var n=!0,r=b;return er(e)||(n=!0===t||!er(e[Qn])),r&&n}function g(a){a[Qn].xhrMonitoringState.stateChangeAttached=ne.Attach(a,"readystatechange",function(){try{a&&4===a.readyState&&p(a)&&((i=(r=a)[Qn]).responseFinishedTime=Ot.Now(),i.status=r.status,s("xmlhttprequest",i,function(){try{var e=i.CreateTrackItem("Ajax",E,function(){var e,n,t={statusText:r.statusText,headerMap:null,correlationContext:o(r),type:r.responseType,responseText:function(e){try{var t=e.responseType;if(""===t||"text"===t)return e.responseText}catch(n){}return null}(r),response:r.response};return!T||(e=r.getAllResponseHeaders())&&(e=Y.strTrim(e).split(/[\r\n]+/),n={},tr(e,function(e){var e=(t=e.split(": ")).shift(),t=t.join(": ");n[e]=t}),t.headerMap=n),t});e?c[_](e):n(null,{requestSentTime:i.requestSentTime,responseFinishedTime:i.responseFinishedTime})}finally{try{r[Qn]=null}catch(t){}}},function(e){n(e,null)}))}catch(t){var e=Mt.dump(t);e&&-1!==ur(e.toLowerCase(),"c00c023f")||ar(c,ie.FailedMonitorAjaxRSC,"Failed to monitor XMLHttpRequest 'readystatechange' event handler, monitoring data for this ajax call may be incorrect.",{ajaxDiagnosticsMessage:ir(a),exception:e})}function n(e,t){(t=t||{}).ajaxDiagnosticsMessage=ir(r),e&&(t.exception=Mt.dump(e)),or(c,ie.FailedMonitorAjaxDur,"Failed to calculate the duration of the ajax call, monitoring data for this ajax call won't be sent.",t)}var r,i})}function o(e){try{var t=e.getAllResponseHeaders();if(null!==t&&-1!==ur(t.toLowerCase(),Tt.requestContextHeaderLowerCase))return t=e.getResponseHeader(Tt.requestContextHeader),qt.getCorrelationContext(t)}catch(n){or(c,ie.FailedMonitorAjaxGetCorrelationHeader,"Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",{ajaxDiagnosticsMessage:ir(e),exception:Mt.dump(n)})}}function h(e,t){var n;t.requestUrl&&C&&I&&(n=H())&&Y.isFunction(n.mark)&&(e=C+e+"#"+ ++nr,n.mark(e),(e=n.getEntriesByName(e))&&1===e.length&&(t.perfMark=e[0]))}function s(a,o,s,u){var c=o.perfMark,l=H(),f=w.maxAjaxPerfLookupAttempts,d=w.ajaxPerfLookupDelay,p=o.requestUrl,g=0;!function h(){try{if(l&&c){g++;for(var e=null,t=l.getEntries(),n=t.length-1;0<=n;n--){var r=t[n];if(r){if("resource"===r.entryType)r.initiatorType!==a||-1===ur(r.name,p)&&-1===ur(p,r.name)||(e=r);else if("mark"===r.entryType&&r.name===c.name){o.perfTiming=e;break}if(r.startTime<c.startTime-1e3)break}}}!c||o.perfTiming||f<=g||!1===o.async?(c&&Y.isFunction(l.clearMarks)&&l.clearMarks(c.name),o.perfAttempts=g,s()):setTimeout(h,d)}catch(i){u(i)}}()}function u(e){var t="";try{er(e)||(t+="string"==typeof e?"(url: '"+e+"')":"(url: '"+e.url+"')")}catch(n){ar(c,ie.FailedMonitorAjaxOpen,"Failed to grab failed fetch diagnostics message",{exception:Mt.dump(n)})}return t}function m(e,t,r,n,i){function a(e,t,n){(n=n||{}).fetchDiagnosticsMessage=u(r),t&&(n.exception=Mt.dump(t)),or(c,e,"Failed to calculate the duration of the fetch call, monitoring data for this fetch call won't be sent.",n)}n&&(n.responseFinishedTime=Ot.Now(),n.status=t,s("fetch",n,function(){var e=n.CreateTrackItem("Fetch",E,i);e?c[_](e):a(ie.FailedMonitorAjaxDur,null,{requestSentTime:n.requestSentTime,responseFinishedTime:n.responseFinishedTime})},function(e){a(ie.FailedMonitorAjaxGetCorrelationHeader,e,null)}))}function v(e){if(e&&e.headers)try{var t=e.headers.get(Tt.requestContextHeader);return qt.getCorrelationContext(t)}catch(n){or(c,ie.FailedMonitorAjaxGetCorrelationHeader,"Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",{fetchDiagnosticsMessage:u(e),exception:Mt.dump(n)})}}c.initialize=function(e,t,n,r){if(!c.isInitialized()){l.initialize(e,t,n,r);var i=c._getTelCtx();if(Q(lr.getDefaultConfig(),function(e,t){w[e]=i.getConfig(lr.identifier,e,t)}),r=w.distributedTracingMode,E=w.enableRequestHeaderTracking,I=w.enableAjaxPerfTracking,M=w.maxAjaxCallsPerView,T=w.enableResponseHeaderTracking,S=r===R.AI||r===R.AI_AND_W3C,y=r===R.AI_AND_W3C||r===R.W3C,I&&(s=e.instrumentationKey||"unkwn",C=5<s.length?$n+s.substring(s.length-5)+".":$n+s+"."),!1===w.disableAjaxTracking&&rr(c)&&!b&&(f(XMLHttpRequest,"open",{req:function(e,t,n,r){var i=e.inst,a=i[Qn];d(i,n)||!p(i,!0)||a&&a.xhrMonitoringState.openDone||(e=i,a=t,i=n,t=r,n=x&&x.telemetryTrace&&x.telemetryTrace.traceID||Mt.generateW3CId(),r=Mt.generateW3CId().substr(0,16),(r=new Xn(n,r,c[Jn]())).method=a,r.requestUrl=i,r.xhrMonitoringState.openDone=!0,r.requestHeaders={},r.async=t,e[Qn]=r,g(e))},hkErr:sr(c,ie.FailedMonitorAjaxOpen,"Failed to monitor XMLHttpRequest.open, monitoring data for this ajax call may be incorrect.")}),f(XMLHttpRequest,"send",{req:function(e,t){var n=e.inst,e=n[Qn];p(n)&&!e.xhrMonitoringState.sendDone&&(h("xhr",e),e.requestSentTime=Ot.Now(),c.includeCorrelationHeaders(e,undefined,undefined,n),e.xhrMonitoringState.sendDone=!0)},hkErr:sr(c,ie.FailedMonitorAjaxSend,"Failed to monitor XMLHttpRequest, monitoring data for this ajax call may be incorrect.")}),f(XMLHttpRequest,"abort",{req:function(e){var t=e.inst,e=t[Qn];p(t)&&!e.xhrMonitoringState.abortDone&&(e.aborted=1,e.xhrMonitoringState.abortDone=!0)},hkErr:sr(c,ie.FailedMonitorAjaxAbort,"Failed to monitor XMLHttpRequest.abort, monitoring data for this ajax call may be incorrect.")}),E&&f(XMLHttpRequest,"setRequestHeader",{req:function(e,t,n){p(e=e.inst)&&(e[Qn].requestHeaders[t]=n)},hkErr:sr(c,ie.FailedMonitorAjaxSetRequestHeader,"Failed to monitor XMLHttpRequest.setRequestHeader, monitoring data for this ajax call may be incorrect.")}),b=!0),(e=!(r=k())||er(r.Request)||er(r.Request[q])||er(r[Zn])?null:r[Zn])&&(s=k(),u=e.polyfill,!1===w.disableFetchTracking?(D.push(It(s,Zn,{req:function(e,t,n){var r,i;!N||d(null,t,n)||u&&b||(r=e.ctx(),i=function(e,t){var n=x&&x.telemetryTrace&&x.telemetryTrace.traceID||Mt.generateW3CId(),r=Mt.generateW3CId().substr(0,16);(n=new Xn(n,r,c[Jn]())).requestSentTime=Ot.Now(),e instanceof Request?n.requestUrl=e?e.url:"":n.requestUrl=e,r="GET",t&&t.method?r=t.method:e&&e instanceof Request&&(r=e.method),n.method=r;var i={};return E&&new Headers((t?t.headers:0)||e instanceof Request&&e.headers||{}).forEach(function(e,t){i[t]=e}),n.requestHeaders=i,h("fetch",n),n}(t,n),(t=c.includeCorrelationHeaders(i,t,n))!==n&&e.set(1,t),r.data=i)},rsp:function(e,t){var n=e.ctx().data;n&&(e.rslt=e.rslt.then(function(t){return m(0,(t||{}).status,t,n,function(){var n,e={statusText:t.statusText,headerMap:null,correlationContext:v(t)};return T&&(n={},t.headers.forEach(function(e,t){n[t]=e}),e.headerMap=n),e}),t})["catch"](function(e){throw m(0,0,t,n,null,e.message),e}))},hkErr:sr(c,ie.FailedMonitorAjaxOpen,"Failed to monitor Window.fetch, monitoring data for this fetch call may be incorrect.")})),N=!0):u&&D.push(It(s,Zn,{req:function(e,t,n){d(null,t,n)}})),u&&(s[Zn].polyfill=u)),0<n.length&&n){for(var a=void 0,o=0;!a&&o<n.length;)n[o]&&n[o].identifier===On&&(a=n[o]),o++;a&&(x=a.context)}}var s,u},c.teardown=function(){tr(D,function(e){e.rm()}),b=N=!(D=[]),c.setInitialized(!1)},c.trackDependencyData=function(e,t){c[_](e,t)},c.includeCorrelationHeaders=function(e,t,n,r){var i,a,o,s=c._currentWindowHost||A;return t?(qt.canIncludeCorrelationHeader(w,e.getAbsoluteUrl(),s)&&((n=n||{}).headers=new Headers(n.headers||t instanceof Request&&t.headers||{}),S&&(i="|"+e.traceID+"."+e.spanID,n.headers.set(Tt.requestIdHeader,i),E&&(e.requestHeaders[Tt.requestIdHeader]=i)),(a=w.appId||x&&x.appId())&&(n.headers.set(Tt.requestContextHeader,Tt.requestContextAppIdFormat+a),E&&(e.requestHeaders[Tt.requestContextHeader]=Tt.requestContextAppIdFormat+a)),y&&(o=new Vn(e.traceID,e.spanID),n.headers.set(Tt.traceParentHeader,o.toString()),E&&(e.requestHeaders[Tt.traceParentHeader]=o.toString()))),n):r?(qt.canIncludeCorrelationHeader(w,e.getAbsoluteUrl(),s)&&(S&&(i="|"+e.traceID+"."+e.spanID,r.setRequestHeader(Tt.requestIdHeader,i),E&&(e.requestHeaders[Tt.requestIdHeader]=i)),(a=w.appId||x&&x.appId())&&(r.setRequestHeader(Tt.requestContextHeader,Tt.requestContextAppIdFormat+a),E&&(e.requestHeaders[Tt.requestContextHeader]=Tt.requestContextAppIdFormat+a)),y&&(o=new Vn(e.traceID,e.spanID),r.setRequestHeader(Tt.traceParentHeader,o.toString()),E&&(e.requestHeaders[Tt.traceParentHeader]=o.toString()))),r):undefined},c[_]=function(e,t,n){-1===M||r<M?(w.distributedTracingMode!==R.W3C&&w.distributedTracingMode!==R.AI_AND_W3C||"string"!=typeof e.id||"."===e.id[e.id.length-1]||(e.id+="."),Y.isNullOrUndefined(e.startTime)&&(e.startTime=new Date),n=Fn.create(e,_n.dataType,_n.envelopeType,c[Jn](),t,n),c.core.track(n)):r===M&&ar(c,ie.MaxAjaxPerPVExceeded,"Maximum ajax per page view limit reached, ajax monitoring is paused until the next trackPageView(). In order to increase the limit set the maxAjaxCallsPerView configuration parameter.",!0),++r}}),e}e.AjaxPlugin=Ke,e.ajaxRecord=Xn,function(e,t,n){var r=Object.defineProperty;if(r)try{return r(e,t,n)}catch(i){}typeof n.value!==undefined&&(e[t]=n.value)}(e,"__esModule",{value:!0})};"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e.Microsoft=e.Microsoft||{},e.Microsoft.ApplicationInsights=e.Microsoft.ApplicationInsights||{}));
//# sourceMappingURL=applicationinsights-dependencies-js.min.js.map
