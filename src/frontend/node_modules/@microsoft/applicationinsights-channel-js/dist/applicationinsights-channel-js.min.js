/*!
 * Application Insights JavaScript SDK - Channel, 2.5.11
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */
var e=this,t=function(e){"use strict";var r="function",i="object",t="undefined",a="prototype",o="hasOwnProperty";function n(){return typeof globalThis!==t&&globalThis?globalThis:typeof self!==t&&self?self:typeof window!==t&&window?window:typeof global!==t&&global?global:null}function s(e){var t=Object.create;if(t)return t(e);if(null==e)return{};if((t=typeof e)!==i&&t!==r)throw new TypeError("Object prototype may only be an Object:"+e);function n(){}return n[a]=e,new n}var u,p,c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t[o](n)&&(e[n]=t[n])})(e,t)};nt=function(e,t){function n(){this.constructor=e}c(e,t),e[a]=null===t?s(t):(n[a]=t[a],new n)},(He=wt=n()||{}).__assign||(He.__assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object[a][o].call(t,i)&&(e[i]=t[i]);return e}),He.__extends||(He.__extends=nt),__assign=__assign||wt.__assign,__extends=__extends||wt.__extends,(In=u={})[In.LocalStorage=0]="LocalStorage",In[In.SessionStorage=1]="SessionStorage",(Dt=p=p||{})[Dt.Default=0]="Default",Dt[Dt.Required=1]="Required",Dt[Dt.Array=2]="Array",Dt[Dt.Hidden=4]="Hidden",(zt={})[zt.AI=0]="AI",zt[zt.AI_AND_W3C=1]="AI_AND_W3C",zt[zt.W3C=2]="W3C";var l=2,d=t,f=i,g=a,h="window",m="document",v="navigator",y="JSON",I=n;function C(e){var t=I();return t&&t[e]?t[e]:e===h&&S()?window:null}function S(){return typeof window===f&&window}function _(){return S()?window:C(h)}function x(){return typeof document===f&&document?document:C(m)}function N(){return typeof navigator===f&&navigator?navigator:C(v)}function T(){return typeof JSON===f&&JSON||null!==C(y)}function E(){return T()?JSON||C(y):null}var w="attachEvent",A="addEventListener",b="detachEvent",R="removeEventListener",L=4294967296,M=4294967295,D=null,F=!1,P=123456789,O=987654321;function k(e){e<0&&(e>>>=0),P=123456789+e&M,O=987654321-e&M,F=!0}function U(){k(Math.random()*L^(new Date).getTime())}function z(e,t){return typeof e===t}function B(e){return z(e,t)||e===undefined}function q(e){return B(e)||null===e}function j(e,t){return e&&Object[a].hasOwnProperty.call(e,t)}function G(e){return z(e,i)}function H(e){return z(e,r)}function K(e,t,n,r){void 0===r&&(r=!1);var i=!1;if(!q(e))try{q(e[A])?q(e[w])||(e[w]("on"+t,n),i=!0):(e[A](t,n,r),i=!0)}catch(a){}return i}function V(e,t,n,r){if(void 0===r&&(r=!1),!q(e))try{q(e[R])?q(e[b])||e[b]("on"+t,n):e[R](t,n,r)}catch(i){}}function W(e,t){if(e&&G(e))for(var n in e)j(e,n)&&t.call(e,n,e[n])}var X=(Y.isDate=function(e){return"[object Date]"===Object[a].toString.call(e)},Y.isArray=function(e){return"[object Array]"===Object[a].toString.call(e)},Y.isError=function(e){return"[object Error]"===Object[a].toString.call(e)},Y.isString=function(e){return z(e,"string")},Y.isNumber=function(e){return z(e,"number")},Y.isBoolean=function(e){return z(e,"boolean")},Y.disableCookies=function(){Y._canUseCookies=!1},Y.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(Z,function(e){var t=0|Y.randomValue(15);return("x"===e?t:3&t|8).toString(16)})},Y.toISOString=function(e){if(Y.isDate(e)){var t=function(e){return 1===(e+="").length&&(e="0"+e),e};return e.getUTCFullYear()+"-"+t(1+e.getUTCMonth())+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+((e.getUTCMilliseconds()/1e3).toFixed(3)+"").slice(2,5)+"Z"}},Y.arrForEach=function(e,t,n){for(var r=e.length,i=0;i<r;i++)i in e&&t.call(n||e,e[i],i,e)},Y.arrIndexOf=function(e,t,n){for(var r=e.length,i=Math.max(0<=(n=n||0)?n:r-Math.abs(n),0);i<r;i++)if(i in e&&e[i]===t)return i;return-1},Y.arrMap=function(e,t,n){for(var r=e.length,i=n||e,a=Array(r),o=0;o<r;o++)o in e&&(a[o]=t.call(i,e[o],e));return a},Y.arrReduce=function(e,t,n){var r,i=e.length,a=0;if(3<=arguments.length)r=n;else{for(;a<i&&!(a in e);)a++;r=e[a++]}for(;a<i;)a in e&&(r=t(r,e[a],a,e)),a++;return r},Y.strTrim=function(e){return Y.isString(e)?e.replace(/^\s+|\s+$/g,""):e},Y.objKeys=function(e){var t=!{toString:null}.propertyIsEnumerable("toString");if(!(H(e)||G(e)&&null!==e))throw new TypeError("objKeys called on non-object");var n,r=[];for(n in e)j(e,n)&&r.push(n);if(t)for(var i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],a=i.length,o=0;o<a;o++)j(e,i[o])&&r.push(i[o]);return r},Y.addEventHandler=function(e,t){var n=!1,r=_();return r&&(n=K(r,e,t),n=K(r.body,e,t)||n),(r=x())&&(n=Q.Attach(r,e,t)||n),n},Y.dateNow=function(){var e=Date;return e.now?e.now():(new e).getTime()},Y.perfNow=function(){var e=C("performance");return e&&e.now?e.now():Y.dateNow()},Y.newId=function(e){void 0===e&&(e=22);for(var t=Y.random32()>>>0,n=0,r="";r.length<e;)r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[0|63&t],t>>>=6,5==++n&&(t=(Y.random32()<<2&4294967295|3&t)>>>0,n=0);return r},Y.isIE=function(){var e;return null===D&&(e=((N()||{}).userAgent||"").toLowerCase(),D=!!~e.indexOf("msie")||!!~e.indexOf("trident/")),D},Y.randomValue=function(e){return 0<e?Math.floor(Y.random32()/M*(e+1))>>>0:0},Y.random32=function(e){var t=(t=C("crypto")||C("msCrypto"))&&t.getRandomValues?t.getRandomValues(new Uint32Array(1))[0]&M:Y.isIE()?(F||U(),Y.mwcRandom32()&M):Math.floor(L*Math.random()|0);return e||(t>>>=0),t},Y.mwcRandomSeed=function(e){e?k(e):U()},Y.mwcRandom32=function(e){var t=((O=36969*(65535&O)+(O>>16)&M)<<16)+(65535&(P=18e3*(65535&P)+(P>>16)&M))>>>0&M|0;return e||(t>>>=0),t},Y.generateW3CId=function(){for(var e,t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n="",r=0;r<4;r++)n+=t[15&(e=Y.random32())]+t[e>>4&15]+t[e>>8&15]+t[e>>12&15]+t[e>>16&15]+t[e>>20&15]+t[e>>24&15]+t[e>>28&15];var i=t[8+(3&Y.random32())|0];return n.substr(0,8)+n.substr(9,4)+"4"+n.substr(13,3)+i+n.substr(16,3)+n.substr(19,12)},Y.isTypeof=z,Y.isUndefined=B,Y.isNullOrUndefined=q,Y.hasOwnProperty=j,Y.isFunction=H,Y.isObject=G,Y.objCreate=s,Y.objDefineAccessors=function(e,t,n,r){var i=Object.defineProperty;if(i)try{var a={enumerable:!0,configurable:!0};return n&&(a.get=n),r&&(a.set=r),i(e,t,a),!0}catch(o){}return!1},Y);function Y(){}var J,Z=/[xy]/g,Q=($.Attach=K,$.AttachEvent=K,$.Detach=V,$.DetachEvent=V,$);function $(){}(Bt=J=J||{})[Bt.CRITICAL=1]="CRITICAL",Bt[Bt.WARNING=2]="WARNING";var ee={BrowserDoesNotSupportLocalStorage:0,BrowserCannotReadLocalStorage:1,BrowserCannotReadSessionStorage:2,BrowserCannotWriteLocalStorage:3,BrowserCannotWriteSessionStorage:4,BrowserFailedRemovalFromLocalStorage:5,BrowserFailedRemovalFromSessionStorage:6,CannotSendEmptyTelemetry:7,ClientPerformanceMathError:8,ErrorParsingAISessionCookie:9,ErrorPVCalc:10,ExceptionWhileLoggingError:11,FailedAddingTelemetryToBuffer:12,FailedMonitorAjaxAbort:13,FailedMonitorAjaxDur:14,FailedMonitorAjaxOpen:15,FailedMonitorAjaxRSC:16,FailedMonitorAjaxSend:17,FailedMonitorAjaxGetCorrelationHeader:18,FailedToAddHandlerForOnBeforeUnload:19,FailedToSendQueuedTelemetry:20,FailedToReportDataLoss:21,FlushFailed:22,MessageLimitPerPVExceeded:23,MissingRequiredFieldSpecification:24,NavigationTimingNotSupported:25,OnError:26,SessionRenewalDateIsZero:27,SenderNotInitialized:28,StartTrackEventFailed:29,StopTrackEventFailed:30,StartTrackFailed:31,StopTrackFailed:32,TelemetrySampledAndNotSent:33,TrackEventFailed:34,TrackExceptionFailed:35,TrackMetricFailed:36,TrackPVFailed:37,TrackPVFailedCalc:38,TrackTraceFailed:39,TransmissionFailed:40,FailedToSetStorageBuffer:41,FailedToRestoreStorageBuffer:42,InvalidBackendResponse:43,FailedToFixDepricatedValues:44,InvalidDurationValue:45,TelemetryEnvelopeInvalid:46,CreateEnvelopeError:47,CannotSerializeObject:48,CannotSerializeObjectNonSerializable:49,CircularReferenceDetected:50,ClearAuthContextFailed:51,ExceptionTruncated:52,IllegalCharsInName:53,ItemNotInArray:54,MaxAjaxPerPVExceeded:55,MessageTruncated:56,NameTooLong:57,SampleRateOutOfRange:58,SetAuthContextFailed:59,SetAuthContextFailedAccountName:60,StringValueTooLong:61,StartCalledMoreThanOnce:62,StopCalledWithoutStart:63,TelemetryInitializerFailed:64,TrackArgumentsNotSpecified:65,UrlTooLong:66,SessionStorageBufferFull:67,CannotAccessCookie:68,IdTooLong:69,InvalidEvent:70,FailedMonitorAjaxSetRequestHeader:71,SendBrowserInfoOnUserInit:72,PluginException:73,NotificationException:74,SnippetScriptLoadFailure:99,InvalidInstrumentationKey:100,CannotParseAiBlobValue:101,InvalidContentBlob:102,TrackPageActionEventFailed:103},te="constructor",ne="prototype",re="function",ie="_dynInstFuncs",ae="_isDynProxy",oe="_dynClass",se="_dynCls$",ue="_dynInstChk",ce=ue,le="_dfOpts",de="_unknown_",fe="__proto__",pe="useBaseInst",ge="setInstFuncs",he=Object.getPrototypeOf,me=0;function ve(e,t){return e&&Object[ne].hasOwnProperty.call(e,t)}function ye(e){return typeof e===re}function Ie(e){return e&&(e===Object[ne]||e===Array[ne])}function Se(e){return Ie(e)||e===Function[ne]}function Ce(e){if(e){if(he)return he(e);if(e=e[fe]||e[ne]||e[te])return e}return null}function _e(e,t,n){return t!==te&&ye(e[t])&&(n||ve(e,t))}function xe(e){throw new TypeError("DynamicProto: "+e)}function Ne(e,t){for(var n=e.length-1;0<=n;n--)if(e[n]===t)return 1}function Te(e,t){return ve(e,ne)?e.name||t||de:((e||{})[te]||{}).name||t||de}function Ee(e,n,t,r){ve(e,ne)||xe("theClass is an invalid class definition.");var i=e[ne];!function(e){for(var t=Ce(n);t&&!Se(t);){if(t===e)return 1;t=Ce(t)}}(i)&&xe("["+Te(e)+"] is not in class hierarchy of ["+Te(n)+"]");var a=null;ve(i,oe)?a=i[oe]:(a=se+Te(e,"_")+"$"+me,me++,i[oe]=a);var o=Ee[le],s=!!o[pe];s&&r&&r[pe]!==undefined&&(s=!!r[pe]),t(n,function(e,t,n,a){function r(e,t,n){var r,i=t[u];return i[ae]&&a&&!1!==(r=e[ie]||{})[ce]&&(i=(r[t[oe]]||{})[n]||i),function(){return i.apply(e,arguments)}}var i={};for(u in n)i[u]=r(t,n,u);for(var o=Ce(e),s=[];o&&!Se(o)&&!Ne(s,o);){for(var u in o)!i[u]&&_e(o,u,!he)&&(i[u]=r(t,o,u));s.push(o),o=Ce(o)}return i}(i,n,e=function(e){var t,n={};for(t in e)!n[t]&&_e(e,t,!1)&&(n[t]=e[t]);return n}(n),s)),(o=!!he&&!!o[ge])&&r&&(o=!!r[ge]),function(e,t,n,r,i){if(!Ie(e)){var a,o=n[ie]=n[ie]||{},s=o[t]=o[t]||{};for(a in!1!==o[ce]&&(o[ce]=!!i),n)_e(n,a,!1)&&n[a]!==r[a]&&(s[a]=n[a],delete n[a],ve(e,a)&&(!e[a]||e[a][ae])||(e[a]=function(n,r){var i=function(){var e,t;return(function(e,t,n,r){var i=null;if(e&&ve(n,oe)){var a=e[ie]||{};if((i=(a[n[oe]]||{})[t])||xe("Missing ["+t+"] "+re),!i[ue]&&!1!==a[ce]){for(var o=!ve(e,t),s=Ce(e),u=[];o&&s&&!Se(s)&&!Ne(u,s);){var c=s[t];if(c){o=c===r;break}u.push(s),s=Ce(s)}try{o&&(e[t]=i),i[ue]=1}catch(l){a[ce]=!1}}}return i}(this,r,n,i)||((t=n[e=r])===i&&(t=Ce(n)[e]),ye(t)||xe("["+e+"] is not a "+re),t)).apply(this,arguments)};return i[ae]=1,i}(e,a)))}}(i,a,n,e,!1!==o)}function we(e){return e?'"'+e.replace(/\"/g,"")+'"':""}Ee[le]={setInstFuncs:!0,useBaseInst:!0};var Ae=(be.dataType="MessageData",be);function be(e,t,n,r){void 0===n&&(n=!1),this.messageId=e,this.message=(n?"AI: ":"AI (Internal): ")+e,e="",T()&&(e=E().stringify(r)),e=(t?" message:"+we(t):"")+(r?" props:"+we(e):""),this.message+=e}var Re=function Nr(i){this.identifier="DiagnosticLogger",this.queue=[];var s=0,u={};Ee(Nr,this,function(a){var n=X.isNullOrUndefined,o=X.isUndefined,r=X.isFunction;function e(e,t){return e=i[e],n(e)?t:e}n(i)&&(i={}),a.consoleLoggingLevel=function(){return e("loggingLevelConsole",0)},a.telemetryLoggingLevel=function(){return e("loggingLevelTelemetry",1)},a.maxInternalMessageLimit=function(){return e("maxMessageLimit",25)},a.enableDebugExceptions=function(){return e("enableDebugExceptions",!1)},a.throwInternal=function(e,t,n,r,i){if(void 0===i&&(i=!1),r=new Ae(t,n,i,r),a.enableDebugExceptions())throw r;!o(r)&&r&&(o(r.message)||(i?(i=+r.messageId,!u[i]&&a.consoleLoggingLevel()>=J.WARNING&&(a.warnToConsole(r.message),u[i]=!0)):a.consoleLoggingLevel()>=J.WARNING&&a.warnToConsole(r.message),a.logInternalMessage(e,r)))},a.warnToConsole=function(e){var t,n=typeof console!==d?console:C("console");n&&(t="log",n.warn&&(t="warn"),r(n[t])&&n[t](e))},a.resetInternalMessageCount=function(){s=0,u={}},a.logInternalMessage=function(e,t){var n,r;s>=a.maxInternalMessageLimit()||(n=!0,r="AITR_"+t.messageId,u[r]?n=!1:u[r]=!0,n&&(e<=a.telemetryLoggingLevel()&&(a.queue.push(t),s++),s===a.maxInternalMessageLimit()&&(e="Internal events throttle limit per PageView reached for this app.",t=new Ae(ee.MessageLimitPerPVExceeded,e,!1),a.queue.push(t),a.warnToConsole(e))))}})},Le="ctx",Me=(De.ParentContextKey="parent",De.ChildrenContextKey="childEvts",De);function De(e,i,t){var n,a=this,o=!1;a.start=X.dateNow(),a.name=e,a.isAsync=t,a.isChildEvt=function(){return!1},X.isFunction(i)&&(o=X.objDefineAccessors(a,"payload",function(){return!n&&X.isFunction(i)&&(n=i(),i=null),n})),a.getCtx=function(e){return e?(e===De.ParentContextKey||e===De.ChildrenContextKey?a:a[Le]||{})[e]:null},a.setCtx=function(e,t){e&&(e===De.ParentContextKey?(a[e]||(a.isChildEvt=function(){return!0}),a[e]=t):e===De.ChildrenContextKey?a[e]=t:(a[Le]=a[Le]||{})[e]=t)},a.complete=function(){var e=0,t=a.getCtx(De.ChildrenContextKey);if(X.isArray(t))for(var n=0;n<t.length;n++){var r=t[n];r&&(e+=r.time)}a.time=X.dateNow()-a.start,a.exTime=a.time-e,a.complete=function(){},!o&&X.isFunction(i)&&(a.payload=i())}}var Fe=function Tr(t){this.ctx={},Ee(Tr,this,function(n){n.create=function(e,t,n){return new Me(e,t,n)},n.fire=function(e){e&&(e.complete(),t&&t.perfEvent(e))},n.setCtx=function(e,t){e&&((n[Le]=n[Le]||{})[e]=t)},n.getCtx=function(e){return(n[Le]||{})[e]}})},Pe="CoreUtils.doPerf";function Oe(e,t,n,r,i){if(e){var a=e;if(a&&X.isFunction(a.getPerfMgr)&&(a=a.getPerfMgr()),a){var o,s=void 0,u=a.getCtx(Pe);try{if(s=a.create(t(),r,i))return u&&s.setCtx&&(s.setCtx(Me.ParentContextKey,u),u.getCtx&&u.setCtx&&((o=u.getCtx(Me.ChildrenContextKey))||(o=[],u.setCtx(Me.ChildrenContextKey,o)),o.push(s))),a.setCtx(Pe,s),n(s)}catch(c){s&&s.setCtx&&s.setCtx("exception",c)}finally{s&&a.fire(s),a.setCtx(Pe,u)}}}return n()}var ke=X.isFunction,Ue=function(i,t){var a=this,o=null,s=ke(i.processTelemetry),u=ke(i.setNextPlugin);a._hasRun=!1,a.getPlugin=function(){return i},a.getNext=function(){return o},a.setNext=function(e){o=e},a.processTelemetry=function(n,r){r=r||t;var e=i?i.identifier:"TelemetryPluginChain";Oe(r?r.core():null,function(){return e+":processTelemetry"},function(){if(i&&s){a._hasRun=!0;try{r.setNext(o),u&&i.setNextPlugin(o),o&&(o._hasRun=!1),i.processTelemetry(n,r)}catch(t){var e=o&&o._hasRun;o&&e||r.diagLog().throwInternal(J.CRITICAL,ee.PluginException,"Plugin ["+i.identifier+"] failed during processTelemetry - "+t),o&&!e&&o.processTelemetry(n,r)}}else o&&(a._hasRun=!0,o.processTelemetry(n,r))},function(){return{item:n}},!n.sync)}},ze=X.isNullOrUndefined;function Be(e,t){var n=[];if(e&&0<e.length)for(var r=null,i=0;i<e.length;i++){var a=e[i];a&&X.isFunction(a.processTelemetry)&&(a=new Ue(a,t),n.push(a),r&&r.setNext(a),r=a)}return 0<n.length?n[0]:null}var qe=function Er(e,i,n,t){var r,a,o,s,u=this,c=null;null!==t&&(e&&X.isFunction(e.getPlugin)?c=function(e,t,n){var r=[],i=!n;if(e)for(;e;){var a=e.getPlugin();!i&&a!==n||(i=!0,r.push(a)),e=e.getNext()}return i||r.push(n),Be(r,t)}(e,u,t||e.getPlugin()):t?(r=u,o=e,s=!1,(a=t)&&e&&(o=[],X.arrForEach(e,function(e){!s&&e!==a||(s=!0,o.push(e))})),a&&!s&&(o=o||[]).push(a),c=Be(o,r)):X.isUndefined(t)&&(c=Be(e,u))),u.core=function(){return n},u.diagLog=function(){return(n||{}).logger||new Re(i||{})},u.getCfg=function(){return i},u.getExtCfg=function(e,t){var n,r;return void 0===t&&(t={}),!i||(r=i.extensionConfig)&&e&&(n=r[e]),n||t},u.getConfig=function(e,t,n){var r;return void 0===n&&(n=!1),(e=u.getExtCfg(e,null))&&!ze(e[t])?r=e[t]:i&&!ze(i[t])&&(r=i[t]),ze(r)?n:r},u.hasNext=function(){return null!=c},u.getNext=function(){return c},u.setNext=function(e){c=e},u.processNext=function(e){var t=c;t&&(c=t.getNext(),t.processTelemetry(e,u))},u.createNew=function(e,t){return void 0===e&&(e=null),new Er(e||c,i,n,t)}},je=X.isFunction,Ge="getPlugin",He=(Ke.prototype.initialize=function(e,t,n,r){this._baseTelInit(e,t,n,r)},Ke);function Ke(){var a=this,o=!1,s=null,u=null;a.core=null,a.diagLog=function(e){return a._getTelCtx(e).diagLog()},a.isInitialized=function(){return o},a.setInitialized=function(e){o=e},a.setNextPlugin=function(e){u=e},a.processNext=function(e,t){t?t.processNext(e):u&&je(u.processTelemetry)&&u.processTelemetry(e,null)},a._getTelCtx=function(e){void 0===e&&(e=null);var t=e;return t||(e=s||new qe(null,{},a.core),t=u&&u[Ge]?e.createNew(null,u[Ge]):e.createNew(null,u)),t},a._baseTelInit=function(e,t,n,r){e&&(e.extensionConfig=e.extensionConfig||[]),!r&&t&&(r=t.getProcessTelContext().getNext());var i=u;u&&u[Ge]&&(i=u[Ge]()),a.core=t,s=new qe(r,e,t,i),o=!0}}var Ve=X.isFunction,We="processTelemetry",Xe="priority",Ye="setNextPlugin",Je="isInitialized";function Ze(t,n){for(var e=[],r=null,i=t.getNext();i;){var a=i.getPlugin();a&&(r&&Ve(r[Ye])&&Ve(a[We])&&r[Ye](a),Ve(a[Je])&&a[Je]()||e.push(a),r=a,i=i.getNext())}X.arrForEach(e,function(e){e.initialize(t.getCfg(),t.core(),n,t.getNext())})}function Qe(e){return e.sort(function(e,t){var n=0,r=Ve(t[We]);return Ve(e[We])?n=r?e[Xe]-t[Xe]:1:r&&(n=-1),n})}var $e,et=500,tt="Channel has invalid priority",nt=X.objDefineAccessors,rt=($e=He,__extends(it,$e),it._staticInit=(nt(it.prototype,"ChannelControls",it.prototype.getChannelControls),void nt(it.prototype,"channelQueue",it.prototype.getChannelControls)),it);function it(){var r=$e.call(this)||this;r.identifier="ChannelControllerPlugin",r.priority=et;var u,c=X.arrForEach;function l(e){e&&0<e.length&&(e=e.sort(function(e,t){return e.priority-t.priority}),c(e,function(e){if(e.priority<et)throw Error(tt+e.identifier)}),u.push(e))}return Ee(it,r,function(o,s){o.setNextPlugin=function(e){},o.processTelemetry=function(t,n){u&&c(u,function(e){0<e.length&&r._getTelCtx(n).createNew(e).processNext(t)})},o.getChannelControls=function(){return u},o.initialize=function(t,n,r){var e,i,a;o.isInitialized()||(s.initialize(t,n,r),t.isCookieUseDisabled&&X.disableCookies(),i=r,u=[],(e=(t||{}).channels)&&c(e,l),i&&(a=[],c(i,function(e){e.priority>et&&a.push(e)}),l(a)),c(u,function(e){return Ze(new qe(e,t,n),r)}))}}),r}var at=X.arrForEach,ot=X.isNullOrUndefined,st="_notificationManager",ut=function wr(e){this.listeners=[];var a=X.arrForEach,t=!!(e||{}).perfEvtsSendAll;Ee(wr,this,function(i){i.addNotificationListener=function(e){i.listeners.push(e)},i.removeNotificationListener=function(e){for(var t=X.arrIndexOf(i.listeners,e);-1<t;)i.listeners.splice(t,1),t=X.arrIndexOf(i.listeners,e)},i.eventsSent=function(t){a(i.listeners,function(e){e&&e.eventsSent&&setTimeout(function(){return e.eventsSent(t)},0)})},i.eventsDiscarded=function(t,n){a(i.listeners,function(e){e&&e.eventsDiscarded&&setTimeout(function(){return e.eventsDiscarded(t,n)},0)})},i.eventsSendRequest=function(n,r){a(i.listeners,function(e){if(e&&e.eventsSendRequest)if(r)setTimeout(function(){return e.eventsSendRequest(n,r)},0);else try{e.eventsSendRequest(n,r)}catch(t){}})},i.perfEvent=function(n){n&&(!t&&n.isChildEvt()||a(i.listeners,function(e){if(e&&e.perfEvent)if(n.isAsync)setTimeout(function(){return e.perfEvent(n)},0);else try{e.perfEvent(n)}catch(t){}}))}})},ct=function Ar(){var t,s,u,n,c=!1;Ee(Ar,this,function(o){o._extensions=[],s=new rt,o.logger=X.objCreate({throwInternal:function(e,t,n,r,i){void 0===i&&(i=!1)},warnToConsole:function(e){},resetInternalMessageCount:function(){}}),t=[],o.isInitialized=function(){return c},o.initialize=function(e,t,r,n){if(o.isInitialized())throw Error("Core should not be initialized more than once");if(!e||ot(e.instrumentationKey))throw Error("Please provide instrumentation key");u=n,o[st]=n,o.config=e||{},e.extensions=ot(e.extensions)?[]:e.extensions,(e.extensionConfig=ot(e.extensionConfig)?{}:e.extensionConfig).NotificationManager=n,r&&(o.logger=r),(n=[]).push.apply(n,t.concat(e.extensions)),n=Qe(n);var i=[],a={};if(at(n,function(e){if(ot(e)||ot(e.initialize))throw Error("Extensions must provide callback to initialize");var t=e.priority,n=e.identifier;e&&t&&(ot(a[t])?a[t]=n:r.warnToConsole("Two extensions have same priority #"+t+" - "+a[t]+", "+n)),(!t||t<s.priority)&&i.push(e)}),n.push(s),i.push(s),n=Qe(n),o._extensions=n,Ze(new qe([s],e,o),n),Ze(new qe(i,e,o),n),o._extensions=i,0===o.getTransmissionControls().length)throw Error("No channels available");c=!0,o.releaseQueue()},o.getTransmissionControls=function(){return s.getChannelControls()},o.track=function(e){e.iKey||(e.iKey=o.config.instrumentationKey),e.time||(e.time=X.toISOString(new Date)),ot(e.ver)&&(e.ver="4.0"),o.isInitialized()?o.getProcessTelContext().processNext(e):t.push(e)},o.getProcessTelContext=function(){var e=o._extensions,t=e;return e&&0!==e.length||(t=[s]),new qe(t,o.config,o)},o.getNotifyMgr=function(){return u||(u=X.objCreate({addNotificationListener:function(e){},removeNotificationListener:function(e){},eventsSent:function(e){},eventsDiscarded:function(e,t){},eventsSendRequest:function(e,t){}}),o[st]=u),u},o.getPerfMgr=function(){return n||o.config&&o.config.enablePerfMgr&&(n=new Fe(o.getNotifyMgr())),n},o.setPerfMgr=function(e){n=e},o.eventCnt=function(){return t.length},o.releaseQueue=function(){0<t.length&&(at(t,function(e){o.getProcessTelContext().processNext(e)}),t=[])}})};__extends(function br(){var e=ct.call(this)||this;return Ee(br,e,function(n,i){function t(e){var t=n.getNotifyMgr();t&&t.eventsDiscarded([e],l)}n.initialize=function(e,t,n,r){i.initialize(e,t,n||new Re(e),r||new ut(e))},n.track=function(e){Oe(n.getPerfMgr(),function(){return"AppInsightsCore:track"},function(){if(null===e)throw t(e),Error("Invalid telemetry item");!function(e){if(X.isNullOrUndefined(e.name))throw t(e),Error("telemetry name required")}(e),i.track(e)},function(){return{item:e}},!e.sync)},n.addNotificationListener=function(e){var t=n.getNotifyMgr();t&&t.addNotificationListener(e)},n.removeNotificationListener=function(e){var t=n.getNotifyMgr();t&&t.removeNotificationListener(e)},n.pollInternalLogs=function(t){var e=n.config.diagnosticLogInterval;return e&&0<e||(e=1e4),setInterval(function(){var e=n.logger?n.logger.queue:[];X.arrForEach(e,function(e){e={name:t||"InternalMessageId: "+e.messageId,iKey:n.config.instrumentationKey,time:X.toISOString(new Date),baseType:Ae.dataType,baseData:{message:e.message}},n.track(e)}),e.length=0},e)}}),e},ct);var lt=(dt.requestContextHeader="Request-Context",dt.requestContextTargetKey="appId",dt.requestContextAppIdFormat="appId=cid-v1:",dt.requestIdHeader="Request-Id",dt.traceParentHeader="traceparent",dt.sdkContextHeader="Sdk-Context",dt.sdkContextHeaderAppIdRequest="appId",dt.requestContextHeaderLowerCase="request-context",dt);function dt(){}var ft=(pt.sanitizeKeyAndAddUniqueness=function(e,t,n){var r=t.length,i=pt.sanitizeKey(e,t);if(i.length!==r){for(var a=0,o=i;n[o]!==undefined;)a++,o=i.substring(0,pt.MAX_NAME_LENGTH-3)+pt.padNumber(a);i=o}return i},pt.sanitizeKey=function(e,t){var n;return t&&(t=pt.trim(t.toString())).length>pt.MAX_NAME_LENGTH&&(n=t.substring(0,pt.MAX_NAME_LENGTH),e.throwInternal(J.WARNING,ee.NameTooLong,"name is too long.  It has been truncated to "+pt.MAX_NAME_LENGTH+" characters.",{name:t},!0)),n||t},pt.sanitizeString=function(e,t,n){var r;return void 0===n&&(n=pt.MAX_STRING_LENGTH),t&&(n=n||pt.MAX_STRING_LENGTH,(t=pt.trim(t)).toString().length>n&&(r=t.toString().substring(0,n),e.throwInternal(J.WARNING,ee.StringValueTooLong,"string value is too long. It has been truncated to "+n+" characters.",{value:t},!0))),r||t},pt.sanitizeUrl=function(e,t){return pt.sanitizeInput(e,t,pt.MAX_URL_LENGTH,ee.UrlTooLong)},pt.sanitizeMessage=function(e,t){var n;return t&&t.length>pt.MAX_MESSAGE_LENGTH&&(n=t.substring(0,pt.MAX_MESSAGE_LENGTH),e.throwInternal(J.WARNING,ee.MessageTruncated,"message is too long, it has been truncated to "+pt.MAX_MESSAGE_LENGTH+" characters.",{message:t},!0)),n||t},pt.sanitizeException=function(e,t){var n;return t&&t.length>pt.MAX_EXCEPTION_LENGTH&&(n=t.substring(0,pt.MAX_EXCEPTION_LENGTH),e.throwInternal(J.WARNING,ee.ExceptionTruncated,"exception is too long, it has been truncated to "+pt.MAX_EXCEPTION_LENGTH+" characters.",{exception:t},!0)),n||t},pt.sanitizeProperties=function(r,e){var i;return e&&(i={},W(e,function(e,t){if(X.isObject(t)&&T())try{t=E().stringify(t)}catch(n){r.throwInternal(J.WARNING,ee.CannotSerializeObjectNonSerializable,"custom property is not valid",{exception:n},!0)}t=pt.sanitizeString(r,t,pt.MAX_PROPERTY_LENGTH),e=pt.sanitizeKeyAndAddUniqueness(r,e,i),i[e]=t}),e=i),e},pt.sanitizeMeasurements=function(n,e){var r;return e&&(r={},W(e,function(e,t){e=pt.sanitizeKeyAndAddUniqueness(n,e,r),r[e]=t}),e=r),e},pt.sanitizeId=function(e,t){return t&&pt.sanitizeInput(e,t,pt.MAX_ID_LENGTH,ee.IdTooLong).toString()},pt.sanitizeInput=function(e,t,n,r){var i;return t&&(t=pt.trim(t)).length>n&&(i=t.substring(0,n),e.throwInternal(J.WARNING,r,"input is too long, it has been truncated to "+n+" characters.",{data:t},!0)),i||t},pt.padNumber=function(e){return(e="00"+e).substr(e.length-3)},pt.trim=function(e){return X.isString(e)?e.replace(/^\s+|\s+$/g,""):e},pt.MAX_NAME_LENGTH=150,pt.MAX_ID_LENGTH=128,pt.MAX_PROPERTY_LENGTH=8192,pt.MAX_STRING_LENGTH=1024,pt.MAX_URL_LENGTH=2048,pt.MAX_MESSAGE_LENGTH=32768,pt.MAX_EXCEPTION_LENGTH=32768,pt);function pt(){}var gt=N(),ht=X.isString,mt=null,vt=(yt.createDomEvent=function(e){var t,n=null;return X.isFunction(Event)?n=new Event(e):(t=x())&&t.createEvent&&(n=t.createEvent("Event")).initEvent(e,!0,!0),n},yt.disableStorage=function(){yt._canUseLocalStorage=!1,yt._canUseSessionStorage=!1},yt._getLocalStorageObject=function(){return yt.canUseLocalStorage()?yt._getVerifiedStorageObject(u.LocalStorage):null},yt._getVerifiedStorageObject=function(e){var t,n,r=null;try{if(X.isNullOrUndefined(I()))return null;n=new Date,(r=C(e===u.LocalStorage?"localStorage":"sessionStorage")).setItem(n.toString(),n.toString()),t=r.getItem(n.toString())!==n.toString(),r.removeItem(n.toString()),t&&(r=null)}catch(i){r=null}return r},yt.isInternalApplicationInsightsEndpoint=function(e){return!!~yt._internalEndpoints.indexOf(e.toLowerCase())},yt.canUseLocalStorage=function(){return yt._canUseLocalStorage===undefined&&(yt._canUseLocalStorage=!!yt._getVerifiedStorageObject(u.LocalStorage)),yt._canUseLocalStorage},yt.getStorage=function(e,t){var n=yt._getLocalStorageObject();if(null!==n)try{return n.getItem(t)}catch(r){yt._canUseLocalStorage=!1,e.throwInternal(J.WARNING,ee.BrowserCannotReadLocalStorage,"Browser failed read of local storage. "+yt.getExceptionName(r),{exception:yt.dump(r)})}return null},yt.setStorage=function(e,t,n){var r=yt._getLocalStorageObject();if(null!==r)try{return r.setItem(t,n),!0}catch(i){yt._canUseLocalStorage=!1,e.throwInternal(J.WARNING,ee.BrowserCannotWriteLocalStorage,"Browser failed write to local storage. "+yt.getExceptionName(i),{exception:yt.dump(i)})}return!1},yt.removeStorage=function(e,t){var n=yt._getLocalStorageObject();if(null!==n)try{return n.removeItem(t),!0}catch(r){yt._canUseLocalStorage=!1,e.throwInternal(J.WARNING,ee.BrowserFailedRemovalFromLocalStorage,"Browser failed removal of local storage item. "+yt.getExceptionName(r),{exception:yt.dump(r)})}return!1},yt._getSessionStorageObject=function(){return yt.canUseSessionStorage()?yt._getVerifiedStorageObject(u.SessionStorage):null},yt.canUseSessionStorage=function(){return yt._canUseSessionStorage===undefined&&(yt._canUseSessionStorage=!!yt._getVerifiedStorageObject(u.SessionStorage)),yt._canUseSessionStorage},yt.getSessionStorageKeys=function(){var t=[];return yt.canUseSessionStorage()&&W(C("sessionStorage"),function(e){t.push(e)}),t},yt.getSessionStorage=function(e,t){var n=yt._getSessionStorageObject();if(null!==n)try{return n.getItem(t)}catch(r){yt._canUseSessionStorage=!1,e.throwInternal(J.WARNING,ee.BrowserCannotReadSessionStorage,"Browser failed read of session storage. "+yt.getExceptionName(r),{exception:yt.dump(r)})}return null},yt.setSessionStorage=function(e,t,n){var r=yt._getSessionStorageObject();if(null!==r)try{return r.setItem(t,n),!0}catch(i){yt._canUseSessionStorage=!1,e.throwInternal(J.WARNING,ee.BrowserCannotWriteSessionStorage,"Browser failed write to session storage. "+yt.getExceptionName(i),{exception:yt.dump(i)})}return!1},yt.removeSessionStorage=function(e,t){var n=yt._getSessionStorageObject();if(null!==n)try{return n.removeItem(t),!0}catch(r){yt._canUseSessionStorage=!1,e.throwInternal(J.WARNING,ee.BrowserFailedRemovalFromSessionStorage,"Browser failed removal of session storage item. "+yt.getExceptionName(r),{exception:yt.dump(r)})}return!1},yt.disableCookies=function(){X.disableCookies()},yt.canUseCookies=function(e){if(X._canUseCookies===undefined){X._canUseCookies=!1;try{X._canUseCookies=yt.document.cookie!==undefined}catch(t){e.throwInternal(J.WARNING,ee.CannotAccessCookie,"Cannot access document.cookie - "+yt.getExceptionName(t),{exception:yt.dump(t)})}}return X._canUseCookies},yt.disallowsSameSiteNone=function(e){return!(!ht(e)||!~e.indexOf("CPU iPhone OS 12")&&!~e.indexOf("iPad; CPU OS 12")&&!(~e.indexOf("Macintosh; Intel Mac OS X 10_14")&&~e.indexOf("Version/")&&~e.indexOf("Safari"))&&(!~e.indexOf("Macintosh; Intel Mac OS X 10_14")||(n=(t=e.length)-40,"AppleWebKit/605.1.15 (KHTML, like Gecko)"!=e.substring(0<=n?n:0,t)))&&!~e.indexOf("Chrome/5")&&!~e.indexOf("Chrome/6")&&(!~e.indexOf("UnrealEngine")||~e.indexOf("Chrome"))&&!~e.indexOf("UCBrowser/12")&&!~e.indexOf("UCBrowser/11"));var t,n},yt.setCookie=function(e,t,n,r){var i;yt.canUseCookies(e)&&(e=i="",r&&(i=";domain="+r),(r=typeof location===f&&location?location:C("location"))&&"https:"===r.protocol&&(e=";secure",null===mt&&(mt=yt.disallowsSameSiteNone((N()||{}).userAgent)),mt||(n+=";SameSite=None")),yt.document.cookie=t+"="+n+i+";path=/"+e)},yt.stringToBoolOrDefault=function(e,t){return void 0===t&&(t=!1),e===undefined||null===e?t:"true"==e.toString().toLowerCase()},yt.getCookie=function(e,t){if(yt.canUseCookies(e)){var n="";if(t&&t.length)for(var r=t+"=",i=yt.document.cookie.split(";"),a=0;a<i.length;a++){var o=i[a];if((o=yt.trim(o))&&!o.indexOf(r)){n=o.substring(r.length,i[a].length);break}}return n}},yt.deleteCookie=function(e,t){yt.canUseCookies(e)&&(yt.document.cookie=t+"=;path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;")},yt.random32=function(){return X.random32(!0)},yt.getIEVersion=function(e){return void 0===e&&(e=null),~(e=e?e.toLowerCase():gt?(gt.userAgent||"").toLowerCase():"").indexOf("msie")?parseInt(e.split("msie")[1]):e.indexOf("trident/")&&(e=parseInt(e.split("trident/")[1]))?e+4:null},yt.msToTimeSpan=function(e){(isNaN(e)||e<0)&&(e=0);var t=""+(e=Math.round(e))%1e3,n=""+Math.floor(e/1e3)%60,r=""+Math.floor(e/6e4)%60,i=""+Math.floor(e/36e5)%24,e=Math.floor(e/864e5),t=1===t.length?"00"+t:2===t.length?"0"+t:t,n=n.length<2?"0"+n:n,r=r.length<2?"0"+r:r;return(0<e?e+".":"")+(i=i.length<2?"0"+i:i)+":"+r+":"+n+"."+t},yt.isCrossOriginError=function(e,t,n,r,i){return("Script error."===e||"Script error"===e)&&!i},yt.dump=function(e){var t=Object[g].toString.call(e),n="";return"[object Error]"===t?n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":T()&&(n=E().stringify(e)),t+n},yt.getExceptionName=function(e){return"[object Error]"===Object[g].toString.call(e)?e.name:""},yt.addEventHandler=function(e,t){return Q.Attach(_(),e,t)},yt.IsBeaconApiSupported=function(){return"sendBeacon"in gt&&gt.sendBeacon},yt.getExtension=function(e,t){for(var n=null,r=0;!n&&r<e.length;)e[r]&&e[r].identifier===t&&(n=e[r]),r++;return n},yt.document=x()||{},yt._canUseLocalStorage=undefined,yt._canUseSessionStorage=undefined,yt._internalEndpoints=["https://dc.services.visualstudio.com/v2/track","https://breeze.aimon.applicationinsights.io/v2/track","https://dc-int.services.visualstudio.com/v2/track"],yt.NotSpecified="not_specified",yt.trim=X.strTrim,yt.newId=X.newId,yt.generateW3CId=X.generateW3CId,yt.isArray=X.isArray,yt.isError=X.isError,yt.isDate=X.isDate,yt.toISOStringForIE8=X.toISOString,yt);function yt(){}var It=(St.parseUrl=function(e){var t=St._htmlAnchorIdx,n=St._htmlAnchorElement,r=n[t];return St.document.createElement?n[t]||(r=n[t]=St.document.createElement("a")):r={host:St.parseHost(e,!0)},r.href=e,++t>=n.length&&(t=0),St._htmlAnchorIdx=t,r},St.getAbsoluteUrl=function(e){var t;return(e=St.parseUrl(e))&&(t=e.href),t},St.getPathName=function(e){var t;return(e=St.parseUrl(e))&&(t=e.pathname),t},St.getCompleteUrl=function(e,t){return e?e.toUpperCase()+" "+t:t},St.parseHost=function(e,t){return(e=St.parseFullHost(e,t))&&null!=(t=e.match(/(www[0-9]?\.)?(.[^/:]+)(\:[\d]+)?/i))&&3<t.length&&ht(t[2])&&0<t[2].length?t[2]+(t[3]||""):e},St.parseFullHost=function(e,t){var n=null;return!e||null!=(e=e.match(/(\w*):\/\/(.[^/:]+)(\:[\d]+)?/i))&&2<e.length&&ht(e[2])&&0<e[2].length&&(n=e[2]||"",t&&2<e.length&&(t=(e[1]||"").toLowerCase(),e=e[3]||"",("http"==t&&":80"===e||"https"==t&&":443"===e)&&(e=""),n+=e)),n},St.document=x()||{},St._htmlAnchorIdx=0,St._htmlAnchorElement=[null,null,null,null,null],St);function St(){}var Ct=(_t.ParseDependencyPath=function(e,t,n,r){var i,a,o,s=r,u=r,s=t&&0<t.length?(o=(i=It.parseUrl(t)).host,s||(null!=i.pathname?("/"!=(a=0===i.pathname.length?"/":i.pathname)[0]&&(a="/"+a),u=i.pathname,ft.sanitizeString(e,n?n+" "+a:a)):ft.sanitizeString(e,t))):o=r;return{target:o,name:s,data:u}},_t);function _t(){}var xt="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Nt="sampleRate",Tt="ProcessLegacy",Et="http.method",wt=(__extends(At,function(){}),At);function At(){return this}var bt,Rt=(bt=function(){this.ver=1,this.sampleRate=100,this.tags={}},__extends(Lt,bt),Lt);function Lt(e,t,n){var r=bt.call(this)||this;return r.name=ft.sanitizeString(e,n)||vt.NotSpecified,r.data=t,r.time=X.toISOString(new Date),r.aiDataContract={time:p.Required,iKey:p.Required,name:p.Required,sampleRate:function(){return 100===r.sampleRate?p.Hidden:p.Required},tags:p.Required,data:p.Required},r}var Mt,Dt=(Mt=In=function(){},__extends(Ft,Mt),Ft);function Ft(){var e=Mt.call(this)||this;return e.ver=2,e.properties={},e.measurements={},e}var Pt,Ot=(Pt=Dt,__extends(kt,Pt),kt.envelopeType="Microsoft.ApplicationInsights.{0}.Event",kt.dataType="EventData",kt);function kt(e,t,n,r){var i=Pt.call(this)||this;return i.aiDataContract={ver:p.Required,name:p.Required,properties:p.Default,measurements:p.Default},i.name=ft.sanitizeString(e,t)||vt.NotSpecified,i.properties=ft.sanitizeProperties(e,n),i.measurements=ft.sanitizeMeasurements(e,r),i}var Ut,zt=function(){},Bt=(Ut=In,__extends(qt,Ut),qt);function qt(){var e=Ut.call(this)||this;return e.ver=2,e.exceptions=[],e.properties={},e.measurements={},e}var jt,nt=function(){this.hasFullStack=!0,this.parsedStack=[]},Gt="error",Ht=(jt=Bt,__extends(Kt,jt),Kt.CreateFromInterface=function(t,e,n,r){var i=e.exceptions&&X.arrMap(e.exceptions,function(e){return Wt.CreateFromInterface(t,e)});return new Kt(t,__assign({},e,{exceptions:i}),n,r)},Kt.prototype.toInterface=function(){var e=this.exceptions,t=this.properties,n=this.measurements,r=this.severityLevel,i=(this.ver,this.problemGroup),a=this.id,o=this.isManual;return{ver:"4.0",exceptions:e instanceof Array&&X.arrMap(e,function(e){return e.toInterface()})||undefined,severityLevel:r,properties:t,measurements:n,problemGroup:i,id:a,isManual:o}},Kt.CreateSimpleException=function(e,t,n,r,i,a){return{exceptions:[{hasFullStack:!0,message:e,stack:i,typeName:t}]}},Kt.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",Kt.dataType="ExceptionData",Kt);function Kt(e,t,n,r,i,a){var o,s=jt.call(this)||this;return s.aiDataContract={ver:p.Required,exceptions:p.Required,severityLevel:p.Default,properties:p.Default,measurements:p.Default},"ver"in(o=t)&&"exceptions"in o&&"properties"in o?(s.exceptions=t.exceptions,s.properties=t.properties,s.measurements=t.measurements,t.severityLevel&&(s.severityLevel=t.severityLevel),t.id&&(s.id=t.id),t.problemGroup&&(s.problemGroup=t.problemGroup),s.ver=2,X.isNullOrUndefined(t.isManual)||(s.isManual=t.isManual)):(s.exceptions=[new Wt(e,t)],s.properties=ft.sanitizeProperties(e,n)||{},s.measurements=ft.sanitizeMeasurements(e,r),i&&(s.severityLevel=i),a&&(s.id=a)),s}var Vt,Wt=(Vt=nt,__extends(Xt,Vt),Xt.prototype.toInterface=function(){var e=this.parsedStack instanceof Array&&X.arrMap(this.parsedStack,function(e){return e.toInterface()});return{id:this.id,outerId:this.outerId,typeName:this.typeName,message:this.message,hasFullStack:this.hasFullStack,stack:this.stack,parsedStack:e||undefined}},Xt.CreateFromInterface=function(e,t){var n=t.parsedStack instanceof Array&&X.arrMap(t.parsedStack,function(e){return Jt.CreateFromInterface(e)})||t.parsedStack;return new Xt(e,__assign({},t,{parsedStack:n}))},Xt.parseStack=function(e){if(X.isString(e)){for(var t=e.split("\n"),n=[],r=0,i=0,a=0;a<=t.length;a++){var o=t[a];Jt.regex.test(o)&&(i+=(o=new Jt(t[a],r++)).sizeInBytes,n.push(o))}if(32768<i)for(var s=0,u=n.length-1,c=0,l=s,d=u;s<u;){if(32768<(c+=n[s].sizeInBytes+n[u].sizeInBytes)){var f=d-l+1;n.splice(l,f);break}l=s,d=u,s++,u--}}return n},Xt);function Xt(e,t){var n,r=Vt.call(this)||this;return r.aiDataContract={id:p.Default,outerId:p.Default,typeName:p.Required,message:p.Required,hasFullStack:p.Default,stack:p.Default,parsedStack:p.Array},"hasFullStack"in(n=t)&&"typeName"in n?(r.typeName=t.typeName,r.message=t.message,r.stack=t.stack,r.parsedStack=t.parsedStack,r.hasFullStack=t.hasFullStack):(n=t,vt.isError(n)||(n=n[Gt]||n.evt||n),r.typeName=ft.sanitizeString(e,function(e){var t="";if(e&&!(t=e.typeName||e.name||""))try{var n=/function (.{1,})\(/.exec(e.constructor.toString()),t=n&&1<n.length?n[1]:""}catch(r){}return t}(n))||vt.NotSpecified,r.message=ft.sanitizeMessage(e,t.message)||vt.NotSpecified,t=t.stack,r.parsedStack=Xt.parseStack(t),r.stack=ft.sanitizeException(e,t),r.hasFullStack=vt.isArray(r.parsedStack)&&0<r.parsedStack.length),r}var Yt,Jt=(Yt=zt,__extends(Zt,Yt),Zt.CreateFromInterface=function(e){return new Zt(e,null)},Zt.prototype.toInterface=function(){return{level:this.level,method:this.method,assembly:this.assembly,fileName:this.fileName,line:this.line}},Zt.regex=/^([\s]+at)?(.*?)(\@|\s\(|\s)([^\(\@\n]+):([0-9]+):([0-9]+)(\)?)$/,Zt.baseSize=58,Zt);function Zt(e,t){var n,r=Yt.call(this)||this;return r.sizeInBytes=0,r.aiDataContract={level:p.Required,method:p.Required,assembly:p.Default,fileName:p.Default,line:p.Default},"string"==typeof e?(n=e,r.level=t,r.method="<no_method>",r.assembly=vt.trim(n),r.fileName="",r.line=0,(n=n.match(Zt.regex))&&5<=n.length&&(r.method=vt.trim(n[2])||r.method,r.fileName=vt.trim(n[4]),r.line=parseInt(n[5])||0)):(r.level=e.level,r.method=e.method,r.assembly=e.assembly,r.fileName=e.fileName,r.line=e.line,r.sizeInBytes=0),r.sizeInBytes+=r.method.length,r.sizeInBytes+=r.fileName.length,r.sizeInBytes+=r.assembly.length,r.sizeInBytes+=Zt.baseSize,r.sizeInBytes+=r.level.toString().length,r.sizeInBytes+=r.line.toString().length,r}var Qt,$t,nt=(Qt=In,__extends(en,Qt),en);function en(){var e=Qt.call(this)||this;return e.ver=2,e.metrics=[],e.properties={},e.measurements={},e}(zt=$t={})[zt.Measurement=0]="Measurement",zt[zt.Aggregation=1]="Aggregation";var tn,nn=(tn=function(){this.kind=$t.Measurement},__extends(rn,tn),rn);function rn(){var e=tn.apply(this,arguments)||this;return e.aiDataContract={name:p.Required,kind:p.Default,value:p.Required,count:p.Default,min:p.Default,max:p.Default,stdDev:p.Default},e}var an,on=(an=nt,__extends(sn,an),sn.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",sn.dataType="MetricData",sn);function sn(e,t,n,r,i,a,o,s){var u=an.call(this)||this;u.aiDataContract={ver:p.Required,metrics:p.Required,properties:p.Default};var c=new nn;return c.count=0<r?r:undefined,c.max=isNaN(a)||null===a?undefined:a,c.min=isNaN(i)||null===i?undefined:i,c.name=ft.sanitizeString(e,t)||vt.NotSpecified,c.value=n,u.metrics=[c],u.properties=ft.sanitizeProperties(e,o),u.measurements=ft.sanitizeMeasurements(e,s),u}var un,nt=(un=Dt,__extends(cn,un),cn);function cn(){var e=un.call(this)||this;return e.ver=2,e.properties={},e.measurements={},e}var ln,dn=(ln=nt,__extends(fn,ln),fn.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",fn.dataType="PageviewData",fn);function fn(e,t,n,r,i,a,o){var s=ln.call(this)||this;return s.aiDataContract={ver:p.Required,name:p.Default,url:p.Default,duration:p.Default,properties:p.Default,measurements:p.Default,id:p.Default},s.id=ft.sanitizeId(e,o),s.url=ft.sanitizeUrl(e,n),s.name=ft.sanitizeString(e,t)||vt.NotSpecified,isNaN(r)||(s.duration=vt.msToTimeSpan(r)),s.properties=ft.sanitizeProperties(e,i),s.measurements=ft.sanitizeMeasurements(e,a),s}var pn,Dt=(pn=In,__extends(gn,pn),gn);function gn(){var e=pn.call(this)||this;return e.ver=2,e.success=!0,e.properties={},e.measurements={},e}var hn,mn=(hn=Dt,__extends(vn,hn),vn.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",vn.dataType="RemoteDependencyData",vn);function vn(e,t,n,r,i,a,o,s,u,c,l,d){void 0===u&&(u="Ajax");var f=hn.call(this)||this;return f.aiDataContract={id:p.Required,ver:p.Required,name:p.Default,resultCode:p.Default,duration:p.Default,success:p.Default,data:p.Default,target:p.Default,type:p.Default,properties:p.Default,measurements:p.Default,kind:p.Default,value:p.Default,count:p.Default,min:p.Default,max:p.Default,stdDev:p.Default,dependencyKind:p.Default,dependencySource:p.Default,commandName:p.Default,dependencyTypeName:p.Default},f.id=t,f.duration=vt.msToTimeSpan(i),f.success=a,f.resultCode=o+"",f.type=ft.sanitizeString(e,u),s=Ct.ParseDependencyPath(e,n,s,r),f.data=ft.sanitizeUrl(e,r)||s.data,f.target=ft.sanitizeString(e,s.target),c&&(f.target=f.target+" | "+c),f.name=ft.sanitizeString(e,s.name),f.properties=ft.sanitizeProperties(e,l),f.measurements=ft.sanitizeMeasurements(e,d),f}var yn,In=(yn=In,__extends(Sn,yn),Sn);function Sn(){var e=yn.call(this)||this;return e.ver=2,e.properties={},e.measurements={},e}var Cn,_n=(Cn=In,__extends(xn,Cn),xn.envelopeType="Microsoft.ApplicationInsights.{0}.Message",xn.dataType="MessageData",xn);function xn(e,t,n,r,i){var a=Cn.call(this)||this;return a.aiDataContract={ver:p.Required,message:p.Required,severityLevel:p.Default,properties:p.Default},t=t||vt.NotSpecified,a.message=ft.sanitizeMessage(e,t),a.properties=ft.sanitizeProperties(e,r),a.measurements=ft.sanitizeMeasurements(e,i),n&&(a.severityLevel=n),a}var Nn,nt=(Nn=nt,__extends(Tn,Nn),Tn);function Tn(){var e=Nn.call(this)||this;return e.ver=2,e.properties={},e.measurements={},e}var En,wn=(En=nt,__extends(An,En),An.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",An.dataType="PageviewPerformanceData",An);function An(e,t,n,r,i,a,o){var s=En.call(this)||this;return s.aiDataContract={ver:p.Required,name:p.Default,url:p.Default,duration:p.Default,perfTotal:p.Default,networkConnect:p.Default,sentRequest:p.Default,receivedResponse:p.Default,domProcessing:p.Default,properties:p.Default,measurements:p.Default},s.url=ft.sanitizeUrl(e,n),s.name=ft.sanitizeString(e,t)||vt.NotSpecified,s.properties=ft.sanitizeProperties(e,i),s.measurements=ft.sanitizeMeasurements(e,a),o&&(s.domProcessing=o.domProcessing,s.duration=o.duration,s.networkConnect=o.networkConnect,s.perfTotal=o.perfTotal,s.receivedResponse=o.receivedResponse,s.sentRequest=o.sentRequest),s}var bn,Rn=(bn=wt,__extends(Ln,bn),Ln);function Ln(e,t){var n=bn.call(this)||this;return n.aiDataContract={baseType:p.Required,baseData:p.Required},n.baseType=e,n.baseData=t,n}(wt={})[wt.Verbose=0]="Verbose",wt[wt.Information=1]="Information",wt[wt.Warning=2]="Warning",wt[wt.Error=3]="Error",wt[wt.Critical=4]="Critical";var Mn=function(){this.applicationVersion="ai.application.ver",this.applicationBuild="ai.application.build",this.applicationTypeId="ai.application.typeId",this.applicationId="ai.application.applicationId",this.applicationLayer="ai.application.layer",this.deviceId="ai.device.id",this.deviceIp="ai.device.ip",this.deviceLanguage="ai.device.language",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceFriendlyName="ai.device.friendlyName",this.deviceNetwork="ai.device.network",this.deviceNetworkName="ai.device.networkName",this.deviceOEMName="ai.device.oemName",this.deviceOS="ai.device.os",this.deviceOSVersion="ai.device.osVersion",this.deviceRoleInstance="ai.device.roleInstance",this.deviceRoleName="ai.device.roleName",this.deviceScreenResolution="ai.device.screenResolution",this.deviceType="ai.device.type",this.deviceMachineName="ai.device.machineName",this.deviceVMName="ai.device.vmName",this.deviceBrowser="ai.device.browser",this.deviceBrowserVersion="ai.device.browserVersion",this.locationIp="ai.location.ip",this.locationCountry="ai.location.country",this.locationProvince="ai.location.province",this.locationCity="ai.location.city",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationRootId="ai.operation.rootId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.sessionIsNew="ai.session.isNew",this.userAccountAcquisitionDate="ai.user.accountAcquisitionDate",this.userAccountId="ai.user.accountId",this.userAgent="ai.user.userAgent",this.userId="ai.user.id",this.userStoreRegion="ai.user.storeRegion",this.userAuthUserId="ai.user.authUserId",this.userAnonymousUserAcquisitionDate="ai.user.anonUserAcquisitionDate",this.userAuthenticatedUserAcquisitionDate="ai.user.authUserAcquisitionDate",this.cloudName="ai.cloud.name",this.cloudRole="ai.cloud.role",this.cloudRoleVer="ai.cloud.roleVer",this.cloudRoleInstance="ai.cloud.roleInstance",this.cloudEnvironment="ai.cloud.environment",this.cloudLocation="ai.cloud.location",this.cloudDeploymentUnit="ai.cloud.deploymentUnit",this.internalNodeName="ai.internal.nodeName",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalSnippet="ai.internal.snippet",this.internalSdkSrc="ai.internal.sdkSrc"},Dn=new Mn,Fn="AppInsightsChannelPlugin",Pn=function Rr(n){var r=[];Ee(Rr,this,function(t){t.enqueue=function(e){r.push(e)},t.count=function(){return r.length},t.clear=function(){r.length=0},t.getItems=function(){return r.slice(0)},t.batchPayloads=function(e){return e&&0<e.length?n.emitLineDelimitedJson()?e.join("\n"):"["+e.join(",")+"]":null},t.markAsSent=function(e){t.clear()},t.clearSent=function(e){}})},On=(kn.BUFFER_KEY="AI_buffer",kn.SENT_BUFFER_KEY="AI_sentBuffer",kn.MAX_BUFFER_SIZE=2e3,kn);function kn(o,s){var u,c=!1;Ee(kn,this,function(e){var t=i(kn.BUFFER_KEY),n=i(kn.SENT_BUFFER_KEY);function r(t,e){var n=[];return X.arrForEach(e,function(e){X.isFunction(e)||-1!==X.arrIndexOf(t,e)||n.push(e)}),n}function i(e){var t=e;try{t=s.namePrefix&&s.namePrefix()?s.namePrefix()+"_"+t:t;var n=vt.getSessionStorage(o,t);if(n&&(n=E().parse(n),X.isString(n)&&(n=E().parse(n)),n&&vt.isArray(n)))return n}catch(r){o.throwInternal(J.CRITICAL,ee.FailedToRestoreStorageBuffer," storage key: "+t+", "+vt.getExceptionName(r),{exception:vt.dump(r)})}return[]}function a(e,t){var n=e;try{n=s.namePrefix&&s.namePrefix()?s.namePrefix()+"_"+n:n;var r=JSON.stringify(t);vt.setSessionStorage(o,n,r)}catch(i){vt.setSessionStorage(o,n,JSON.stringify([])),o.throwInternal(J.WARNING,ee.FailedToSetStorageBuffer," storage key: "+n+", "+vt.getExceptionName(i)+". Buffer cleared",{exception:vt.dump(i)})}}(u=t.concat(n)).length>kn.MAX_BUFFER_SIZE&&(u.length=kn.MAX_BUFFER_SIZE),a(kn.SENT_BUFFER_KEY,[]),a(kn.BUFFER_KEY,u),e.enqueue=function(e){u.length>=kn.MAX_BUFFER_SIZE?c||(o.throwInternal(J.WARNING,ee.SessionStorageBufferFull,"Maximum buffer size reached: "+u.length,!0),c=!0):(u.push(e),a(kn.BUFFER_KEY,u))},e.count=function(){return u.length},e.clear=function(){u=[],a(kn.BUFFER_KEY,[]),a(kn.SENT_BUFFER_KEY,[]),c=!1},e.getItems=function(){return u.slice(0)},e.batchPayloads=function(e){return e&&0<e.length?s.emitLineDelimitedJson()?e.join("\n"):"["+e.join(",")+"]":null},e.markAsSent=function(e){u=r(e,u),a(kn.BUFFER_KEY,u);var t=i(kn.SENT_BUFFER_KEY);t instanceof Array&&e instanceof Array&&((t=t.concat(e)).length>kn.MAX_BUFFER_SIZE&&(o.throwInternal(J.CRITICAL,ee.SessionStorageBufferFull,"Sent buffer reached its maximum size: "+t.length,!0),t.length=kn.MAX_BUFFER_SIZE),a(kn.SENT_BUFFER_KEY,t))},e.clearSent=function(e){e=r(e,e=i(kn.SENT_BUFFER_KEY)),a(kn.SENT_BUFFER_KEY,e)}})}var Un="baseType",zn="baseData",Bn="properties",qn=X.isNullOrUndefined;function jn(e,t,n){return e&&n&&(e[t]=n,e[t])}var Gn=(Hn.extractPropsAndMeasurements=function(e,n,r){qn(e)||W(e,function(e,t){X.isNumber(t)?r[e]=t:X.isString(t)?n[e]=t:T()&&(n[e]=E().stringify(t))})},Hn.createEnvelope=function(e,t,n,r){return jn(r=new Rt(e,r,t),"sampleRate",n[Nt]),(n[zn]||{}).startTime&&(r.time=X.toISOString(n[zn].startTime)),r.iKey=n.iKey,t=n.iKey.replace(/-/g,""),r.name=r.name.replace("{0}",t),Hn.extractPartAExtensions(n,r),n.tags=n.tags||[],r},Hn.extractPartAExtensions=function(e,t){var n=t.tags=t.tags||{},r=e.ext=e.ext||{},i=e.tags=e.tags||[],a=r.user;a&&(jn(n,Dn.userAuthUserId,a.authId),jn(n,Dn.userId,a.id||a.localId)),(a=r.app)&&jn(n,Dn.sessionId,a.sesId),(a=r.device)&&(jn(n,Dn.deviceId,a.id||a.localId),jn(n,Dn.deviceType,a.deviceClass),jn(n,Dn.deviceIp,a.ip),jn(n,Dn.deviceModel,a.model),jn(n,Dn.deviceType,a.deviceType)),(a=e.ext.web)&&(jn(n,Dn.deviceLanguage,a.browserLang),jn(n,Dn.deviceBrowserVersion,a.browserVer),jn(n,Dn.deviceBrowser,a.browser),jn(e=(e=(e=t.data=t.data||{})[zn]=e[zn]||{})[Bn]=e[Bn]||{},"domain",a.domain),jn(e,"isManual",a.isManual?"true":null),jn(e,"screenRes",a.screenRes),jn(e,"userConsent",a.userConsent?"true":null)),(a=r.os)&&jn(n,Dn.deviceOS,a.name),(r=r.trace)&&(jn(n,Dn.operationParentId,r.parentID),jn(n,Dn.operationName,r.name),jn(n,Dn.operationId,r.traceID));for(var o={},s=i.length-1;0<=s;s--)W(i[s],function(e,t){o[e]=t}),i.splice(s,1);W(i,function(e,t){o[e]=t}),t.tags=__assign({},n,o),t.tags[Dn.internalSdkVersion]||(t.tags[Dn.internalSdkVersion]="javascript:"+Hn.Version)},Hn.prototype.Init=function(e,t){this._logger=e,qn(t[zn])&&this._logger.throwInternal(J.CRITICAL,ee.TelemetryEnvelopeInvalid,"telemetryItem.baseData cannot be null.")},Hn.Version="2.5.11",Hn);function Hn(){}var Kn,Vn=(Kn=Gn,__extends(Wn,Kn),Wn.prototype.Create=function(e,t){Kn.prototype.Init.call(this,e,t);var n=t[zn].measurements||{},r=t[zn][Bn]||{};Gn.extractPropsAndMeasurements(t.data,r,n);var i=t[zn];if(qn(i))return e.warnToConsole("Invalid input for dependency data"),null;var a=i[Bn]&&i[Bn][Et]?i[Bn][Et]:"GET",n=new mn(e,i.id,i.target,i.name,i.duration,i.success,i.responseCode,a,i.type,i.correlationContext,r,n),n=new Rn(mn.dataType,n);return Gn.createEnvelope(e,mn.envelopeType,t,n)},Wn.DependencyEnvelopeCreator=new Wn,Wn);function Wn(){return null!==Kn&&Kn.apply(this,arguments)||this}var Xn,Yn=(Xn=Gn,__extends(Jn,Xn),Jn.prototype.Create=function(e,t){Xn.prototype.Init.call(this,e,t);var n={},r={};t[Un]!==Ot.dataType&&(n.baseTypeSource=t[Un]),t[Un]===Ot.dataType?(n=t[zn][Bn]||{},r=t[zn].measurements||{}):t[zn]&&Gn.extractPropsAndMeasurements(t[zn],n,r),Gn.extractPropsAndMeasurements(t.data,n,r);var i=t[zn].name,r=new Ot(e,i,n,r),r=new Rn(Ot.dataType,r);return Gn.createEnvelope(e,Ot.envelopeType,t,r)},Jn.EventEnvelopeCreator=new Jn,Jn);function Jn(){return null!==Xn&&Xn.apply(this,arguments)||this}var Zn,Qn=(Zn=Gn,__extends($n,Zn),$n.prototype.Create=function(e,t){Zn.prototype.Init.call(this,e,t);var n=t[zn].measurements||{},r=t[zn][Bn]||{};Gn.extractPropsAndMeasurements(t.data,r,n);var i=t[zn],n=Ht.CreateFromInterface(e,i,r,n),n=new Rn(Ht.dataType,n);return Gn.createEnvelope(e,Ht.envelopeType,t,n)},$n.ExceptionEnvelopeCreator=new $n,$n);function $n(){return null!==Zn&&Zn.apply(this,arguments)||this}var er,tr=(er=Gn,__extends(nr,er),nr.prototype.Create=function(e,t){er.prototype.Init.call(this,e,t);var n=t[zn],r=n[Bn]||{},i=n.measurements||{};return Gn.extractPropsAndMeasurements(t.data,r,i),i=new on(e,n.name,n.average,n.sampleCount,n.min,n.max,r,i),i=new Rn(on.dataType,i),Gn.createEnvelope(e,on.envelopeType,t,i)},nr.MetricEnvelopeCreator=new nr,nr);function nr(){return null!==er&&er.apply(this,arguments)||this}var rr,ir=(rr=Gn,__extends(ar,rr),ar.prototype.Create=function(e,t){rr.prototype.Init.call(this,e,t);var n,r="duration",i=t[zn];qn(i)||qn(i[Bn])||qn(i[Bn][r])?qn(t.data)||qn(t.data[r])||(n=t.data[r],delete t.data[r]):(n=i[Bn][r],delete i[Bn][r]);var a=t[zn];((t.ext||{}).trace||{}).traceID&&(u=t.ext.trace.traceID);var o=a.id||u,i=a.name,r=a.uri,s=a[Bn]||{},u=a.measurements||{};return qn(a.refUri)||(s.refUri=a.refUri),qn(a.pageType)||(s.pageType=a.pageType),qn(a.isLoggedIn)||(s.isLoggedIn=a.isLoggedIn.toString()),qn(a[Bn])||W(a[Bn],function(e,t){s[e]=t}),Gn.extractPropsAndMeasurements(t.data,s,u),o=new dn(e,i,r,n,s,u,o),o=new Rn(dn.dataType,o),Gn.createEnvelope(e,dn.envelopeType,t,o)},ar.PageViewEnvelopeCreator=new ar,ar);function ar(){return null!==rr&&rr.apply(this,arguments)||this}var or,sr=(or=Gn,__extends(ur,or),ur.prototype.Create=function(e,t){or.prototype.Init.call(this,e,t);var n=t[zn],r=n.name,i=n.uri||n.url,a=n[Bn]||{},o=n.measurements||{};return Gn.extractPropsAndMeasurements(t.data,a,o),n=new wn(e,r,i,undefined,a,o,n),n=new Rn(wn.dataType,n),Gn.createEnvelope(e,wn.envelopeType,t,n)},ur.PageViewPerformanceEnvelopeCreator=new ur,ur);function ur(){return null!==or&&or.apply(this,arguments)||this}var cr,lr=(cr=Gn,__extends(dr,cr),dr.prototype.Create=function(e,t){cr.prototype.Init.call(this,e,t);var n=t[zn].message,r=t[zn].severityLevel,i=t[zn][Bn]||{},a=t[zn].measurements||{};return Gn.extractPropsAndMeasurements(t.data,i,a),a=new _n(e,n,r,i,a),a=new Rn(_n.dataType,a),Gn.createEnvelope(e,_n.envelopeType,t,a)},dr.TraceEnvelopeCreator=new dr,dr);function dr(){return null!==cr&&cr.apply(this,arguments)||this}var fr=function Lr(d){Ee(Lr,this,function(e){function c(o,s){var e="__aiCircularRefCheck",u={};if(!o)return d.throwInternal(J.CRITICAL,ee.CannotSerializeObject,"cannot serialize object because it is null or undefined",{name:s},!0),u;if(o[e])return d.throwInternal(J.WARNING,ee.CircularReferenceDetected,"Circular reference detected while serializing object",{name:s},!0),u;if(o.aiDataContract)return o[e]=!0,W(o.aiDataContract,function(e,t){var n=X.isFunction(t)?t()&p.Required:t&p.Required,r=X.isFunction(t)?t()&p.Hidden:t&p.Hidden,i=t&p.Array,a=o[e]!==undefined,t=X.isObject(o[e])&&null!==o[e];!n||a||i?r||(r=void 0,(r=t?(i?l:c)(o[e],e):o[e])!==undefined&&(u[e]=r)):d.throwInternal(J.CRITICAL,ee.MissingRequiredFieldSpecification,"Missing required field specification. The field is required but not present on source",{field:e,name:s})}),delete o[e],u;if("measurements"===s)u=n(o,"number",s);else if("properties"===s)u=n(o,"string",s);else if("tags"===s)u=n(o,"string",s);else if(vt.isArray(o))u=l(o,s);else{d.throwInternal(J.WARNING,ee.CannotSerializeObjectNonSerializable,"Attempting to serialize an object which does not implement ISerializable",{name:s},!0);try{E().stringify(o),u=o}catch(t){d.throwInternal(J.CRITICAL,ee.CannotSerializeObject,t&&X.isFunction(t.toString)?t.toString():"Error serializing object",null,!0)}}return u}function l(e,t){var n;if(e)if(vt.isArray(e)){n=[];for(var r=0;r<e.length;r++){var i=c(e[r],t+"["+r+"]");n.push(i)}}else d.throwInternal(J.CRITICAL,ee.ItemNotInArray,"This field was specified as an array in the contract but the item is not an array.\r\n",{name:t},!0);return n}function n(e,n,r){var i;return e&&(i={},W(e,function(e,t){"string"===n?t===undefined?i[e]="undefined":null===t?i[e]="null":t.toString?i[e]=t.toString():i[e]="invalid field: toString() is not defined.":"number"===n?t===undefined?i[e]="undefined":null===t?i[e]="null":(t=parseFloat(t),i[e]=isNaN(t)?"NaN":t):(i[e]="invalid field: "+r+" is of unknown type.",d.throwInternal(J.CRITICAL,i[e],null,!0))})),i}e.serialize=function(e){var t=c(e,"root");try{return E().stringify(t)}catch(n){d.throwInternal(J.CRITICAL,ee.CannotSerializeObject,n&&X.isFunction(n.toString)?n.toString():"Error serializing object",null,!0)}}})};function pr(){var a=_(),o=x(),s=!1,u=!0;Ee(pr,this,function(e){try{var t;a&&Q.Attach(a,"online",n)&&(Q.Attach(a,"offline",r),s=!0),o&&(t=o.body||o,X.isUndefined(t.ononline)||(t.ononline=n,t.onoffline=r,s=!0))}catch(i){s=!1}function n(){u=!0}function r(){u=!1}e.isListening=s,e.isOnline=function(){var e=!0,t=N();return s?e=u:t&&!X.isNullOrUndefined(t.onLine)&&(e=t.onLine),e},e.isOffline=function(){return!e.isOnline()}})}var gr=pr.Offline=new pr,hr=(mr.prototype.getHashCodeScore=function(e){return this.getHashCode(e)/mr.INT_MAX_VALUE*100},mr.prototype.getHashCode=function(e){if(""===e)return 0;for(;e.length<mr.MIN_INPUT_LENGTH;)e=e.concat(e);for(var t=5381,n=0;n<e.length;++n)t=(t<<5)+t+e.charCodeAt(n),t&=t;return Math.abs(t)},mr.INT_MAX_VALUE=2147483647,mr.MIN_INPUT_LENGTH=8,mr);function mr(){}var vr=(yr.prototype.getSamplingScore=function(e){return e.tags&&e.tags[this.keys.userId]?this.hashCodeGeneragor.getHashCodeScore(e.tags[this.keys.userId]):e.ext&&e.ext.user&&e.ext.user.id?this.hashCodeGeneragor.getHashCodeScore(e.ext.user.id):e.tags&&e.tags[this.keys.operationId]?this.hashCodeGeneragor.getHashCodeScore(e.tags[this.keys.operationId]):e.ext&&e.ext.telemetryTrace&&e.ext.telemetryTrace.traceID?this.hashCodeGeneragor.getHashCodeScore(e.ext.telemetryTrace.traceID):100*Math.random()},yr);function yr(){this.hashCodeGeneragor=new hr,this.keys=new Mn}var Ir=(Sr.prototype.isSampledIn=function(e){var t=this.sampleRate;return null===t||t===undefined||100<=t||e.baseType===on.dataType||this.samplingScoreGenerator.getSamplingScore(e)<t},Sr);function Sr(e,t){this.INT_MAX_VALUE=2147483647,this._logger=X.isNullOrUndefined(t)?new Re:t,(100<e||e<0)&&(this._logger.throwInternal(J.WARNING,ee.SampleRateOutOfRange,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:e},!0),this.sampleRate=100),this.sampleRate=e,this.samplingScoreGenerator=new vr}function Cr(e){try{return e.responseText}catch(t){}return null}var _r,He=(_r=He,__extends(xr,_r),xr.constructEnvelope=function(e,t,n){var r=t===e.iKey||X.isNullOrUndefined(t)?e:__assign({},e,{iKey:t});switch(r.baseType){case Ot.dataType:return Yn.EventEnvelopeCreator.Create(n,r);case _n.dataType:return lr.TraceEnvelopeCreator.Create(n,r);case dn.dataType:return ir.PageViewEnvelopeCreator.Create(n,r);case wn.dataType:return sr.PageViewPerformanceEnvelopeCreator.Create(n,r);case Ht.dataType:return Qn.ExceptionEnvelopeCreator.Create(n,r);case on.dataType:return tr.MetricEnvelopeCreator.Create(n,r);case mn.dataType:return Vn.DependencyEnvelopeCreator.Create(n,r);default:return Yn.EventEnvelopeCreator.Create(n,r)}},xr._getDefaultAppInsightsChannelConfig=function(){return{endpointUrl:function(){return"https://dc.services.visualstudio.com/v2/track"},emitLineDelimitedJson:function(){return!1},maxBatchInterval:function(){return 15e3},maxBatchSizeInBytes:function(){return 102400},disableTelemetry:function(){return!1},enableSessionStorageBuffer:function(){return!0},isRetryDisabled:function(){return!1},isBeaconApiDisabled:function(){return!0},onunloadDisableBeacon:function(){return!1},instrumentationKey:function(){return undefined},namePrefix:function(){return undefined},samplingPercentage:function(){return 100}}},xr._getEmptyAppInsightsChannelConfig=function(){return{endpointUrl:undefined,emitLineDelimitedJson:undefined,maxBatchInterval:undefined,maxBatchSizeInBytes:undefined,disableTelemetry:undefined,enableSessionStorageBuffer:undefined,isRetryDisabled:undefined,isBeaconApiDisabled:undefined,onunloadDisableBeacon:undefined,instrumentationKey:undefined,namePrefix:undefined,samplingPercentage:undefined}},xr);function xr(){var m,v,y,I,S=_r.call(this)||this;return S.priority=1001,S.identifier=Fn,S._XMLHttpRequestSupported=!1,Ee(xr,S,function(u,o){function e(){throw Error("Method not implemented.")}function s(e,t){var n=u._senderConfig.endpointUrl(),r=u._buffer.batchPayloads(e),r=new Blob([r],{type:"text/plain;charset=UTF-8"});N().sendBeacon(n,r)?(u._buffer.markAsSent(e),u._onSuccess(e,e.length)):(c(e,!0),u.diagLog().throwInternal(J.WARNING,ee.TransmissionFailed,". Failed to send telemetry with Beacon API, retried with xhrSender."))}function c(t,e){var n=new XMLHttpRequest,r=u._senderConfig.endpointUrl();try{n[xt]=!0}catch(i){}n.open("POST",r,e),n.setRequestHeader("Content-type","application/json"),vt.isInternalApplicationInsightsEndpoint(r)&&n.setRequestHeader(lt.sdkContextHeader,lt.sdkContextHeaderAppIdRequest),n.onreadystatechange=function(){return u._xhrReadyStateChange(n,t,t.length)},n.onerror=function(e){return u._onError(t,p(n),e)},r=u._buffer.batchPayloads(t),n.send(r),u._buffer.markAsSent(t)}function i(e){try{if(e&&""!==e){var t=E().parse(e);if(t&&t.itemsReceived&&t.itemsReceived>=t.itemsAccepted&&t.itemsReceived-t.itemsAccepted===t.errors.length)return t}}catch(n){u.diagLog().throwInternal(J.CRITICAL,ee.InvalidBackendResponse,"Cannot parse the response. "+vt.getExceptionName(n),{response:e})}return null}function l(e,t){if(void 0===t&&(t=1),e&&0!==e.length){u._buffer.clearSent(e),m++;for(var n=0,r=e;n<r.length;n++){var i=r[n];u._buffer.enqueue(i)}!function(e){t=m<=1?10:(t=(Math.pow(2,m)-1)/2,t=1+Math.floor(Math.random()*t*10),Math.max(Math.min(t*=e,3600),10));var t=X.dateNow()+1e3*t;v=t}(t),d()}}function d(){var e;y||(e=v?Math.max(0,v-X.dateNow()):0,e=Math.max(u._senderConfig.maxBatchInterval(),e),y=setTimeout(function(){u.triggerSend(!0,null,1)},e))}function f(e){return 408===e||429===e||500===e||503===e}function p(e,t){return e?"XMLHttpRequest,Status:"+e.status+",Response:"+Cr(e)||e.response||"":t}function g(t,e){var n=_(),r=new XDomainRequest;if(r.onload=function(){return u._xdrOnLoad(r,t)},r.onerror=function(e){return u._onError(t,a(r),e)},n=n&&n.location&&n.location.protocol||"",u._senderConfig.endpointUrl().lastIndexOf(n,0))return u.diagLog().throwInternal(J.WARNING,ee.TransmissionFailed,". Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol."),void u._buffer.clear();n=u._senderConfig.endpointUrl().replace(/^(https?:)/,""),r.open("POST",n),n=u._buffer.batchPayloads(t),r.send(n),u._buffer.markAsSent(t)}function a(e,t){return e?"XDomainRequest,Response:"+Cr(e)||"":t}function h(e,t){var n,r=(n="getNotifyMgr",u.core[n]?u.core[n]():u.core._notificationManager);if(r&&r.eventsSendRequest)try{r.eventsSendRequest(e,t)}catch(i){u.diagLog().throwInternal(J.CRITICAL,ee.NotificationException,"send request notification failed: "+vt.getExceptionName(i),{exception:vt.dump(i)})}}u.pause=e,u.resume=e,u.flush=function(){try{u.triggerSend(!0,null,1)}catch(e){u.diagLog().throwInternal(J.CRITICAL,ee.FlushFailed,"flush failed, telemetry will not be collected: "+vt.getExceptionName(e),{exception:vt.dump(e)})}},u.onunloadFlush=function(){if(!1!==u._senderConfig.onunloadDisableBeacon()&&!1!==u._senderConfig.isBeaconApiDisabled()||!vt.IsBeaconApiSupported())u.flush();else try{u.triggerSend(!0,s,2)}catch(e){u.diagLog().throwInternal(J.CRITICAL,ee.FailedToSendQueuedTelemetry,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+vt.getExceptionName(e),{exception:vt.dump(e)})}},u.teardown=e,u.initialize=function(e,t,n,r){o.initialize(e,t,n,r);var i=u._getTelCtx(),a=u.identifier;I=new fr(t.logger),m=0,v=null,u._sender=null,t=xr._getDefaultAppInsightsChannelConfig(),u._senderConfig=xr._getEmptyAppInsightsChannelConfig(),W(t,function(e,t){u._senderConfig[e]=function(){return i.getConfig(a,e,t())}}),u._buffer=u._senderConfig.enableSessionStorageBuffer()&&vt.canUseSessionStorage()?new On(u.diagLog(),u._senderConfig):new Pn(u._senderConfig),u._sample=new Ir(u._senderConfig.samplingPercentage(),u.diagLog()),t=e,!X.isNullOrUndefined(t.disableInstrumentationKeyValidation)&&t.disableInstrumentationKeyValidation||/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/.test(t.instrumentationKey)||u.diagLog().throwInternal(J.CRITICAL,ee.InvalidInstrumentationKey,"Invalid Instrumentation key "+e.instrumentationKey),!u._senderConfig.isBeaconApiDisabled()&&vt.IsBeaconApiSupported()?u._sender=s:typeof XMLHttpRequest===undefined||(e=C("XMLHttpRequest"))&&("withCredentials"in new e?(u._sender=c,u._XMLHttpRequestSupported=!0):typeof XDomainRequest!==undefined&&(u._sender=g))},u.processTelemetry=function(e,n){n=u._getTelCtx(n);try{if(u._senderConfig.disableTelemetry())return;if(!e)return void n.diagLog().throwInternal(J.CRITICAL,ee.CannotSendEmptyTelemetry,"Cannot send empty telemetry");if(e.baseData&&!e.baseType)return void n.diagLog().throwInternal(J.CRITICAL,ee.InvalidEvent,"Cannot send telemetry without baseData and baseType");if(e.baseType||(e.baseType="EventData"),!u._sender)return void n.diagLog().throwInternal(J.CRITICAL,ee.SenderNotInitialized,"Sender was not initialized");if(a=e,!u._sample.isSampledIn(a))return void n.diagLog().throwInternal(J.WARNING,ee.TelemetrySampledAndNotSent,"Telemetry item was sampled out and not sent",{SampleRate:u._sample.sampleRate});e[Nt]=u._sample.sampleRate;var r=xr.constructEnvelope(e,u._senderConfig.instrumentationKey(),n.diagLog());if(!r)return void n.diagLog().throwInternal(J.CRITICAL,ee.CreateEnvelopeError,"Unable to create an AppInsights envelope");var i=!1;if(e.tags&&e.tags[Tt]&&(X.arrForEach(e.tags[Tt],function(e){try{e&&!1===e(r)&&(i=!0,n.diagLog().warnToConsole("Telemetry processor check returns false"))}catch(t){n.diagLog().throwInternal(J.CRITICAL,ee.TelemetryInitializerFailed,"One of telemetry initializers failed, telemetry item will not be sent: "+vt.getExceptionName(t),{exception:vt.dump(t)},!0)}}),delete e.tags[Tt]),i)return;var t=I.serialize(r),a=u._buffer.getItems();(a=u._buffer.batchPayloads(a))&&a.length+t.length>u._senderConfig.maxBatchSizeInBytes()&&u.triggerSend(!0,null,10),u._buffer.enqueue(t),d()}catch(o){n.diagLog().throwInternal(J.WARNING,ee.FailedAddingTelemetryToBuffer,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+vt.getExceptionName(o),{exception:vt.dump(o)})}u.processNext(e,n)},u._xhrReadyStateChange=function(e,t,n){var r;4===e.readyState&&(r=null,u._appId||(r=i(Cr(e)||e.response))&&r.appId&&(u._appId=r.appId),(e.status<200||300<=e.status)&&0!==e.status?!u._senderConfig.isRetryDisabled()&&f(e.status)?(l(t),u.diagLog().throwInternal(J.WARNING,ee.TransmissionFailed,". Response code "+e.status+". Will retry to send "+t.length+" items.")):u._onError(t,p(e)):gr.isOffline()?u._senderConfig.isRetryDisabled()||(l(t,10),u.diagLog().throwInternal(J.WARNING,ee.TransmissionFailed,". Offline - Response Code: "+e.status+". Offline status: "+gr.isOffline()+". Will retry to send "+t.length+" items.")):206===e.status?(r=r||i(Cr(e)||e.response))&&!u._senderConfig.isRetryDisabled()?u._onPartialSuccess(t,r):u._onError(t,p(e)):(m=0,u._onSuccess(t,n)))},u.triggerSend=function(e,t,n){void 0===e&&(e=!0);try{var r;u._senderConfig.disableTelemetry()?u._buffer.clear():0<u._buffer.count()&&(r=u._buffer.getItems(),h(n||0,e),t?t.call(S,r,e):u._sender(r,e)),clearTimeout(y),v=y=null}catch(a){var i=vt.getIEVersion();(!i||9<i)&&u.diagLog().throwInternal(J.CRITICAL,ee.TransmissionFailed,"Telemetry transmission failed, some telemetry will be lost: "+vt.getExceptionName(a),{exception:vt.dump(a)})}},u._onError=function(e,t,n){u.diagLog().throwInternal(J.WARNING,ee.OnError,"Failed to send telemetry.",{message:t}),u._buffer.clearSent(e)},u._onPartialSuccess=function(e,t){for(var n=[],r=[],i=0,a=t.errors.reverse();i<a.length;i++){var o=a[i],s=e.splice(o.index,1)[0];(f(o.statusCode)?r:n).push(s)}0<e.length&&u._onSuccess(e,t.itemsAccepted),0<n.length&&u._onError(n,p(null,["partial success",t.itemsAccepted,"of",t.itemsReceived].join(" "))),0<r.length&&(l(r),u.diagLog().throwInternal(J.WARNING,ee.TransmissionFailed,"Partial success. Delivered: "+e.length+", Failed: "+n.length+". Will retry to send "+r.length+" our of "+t.itemsReceived+" items"))},u._onSuccess=function(e,t){u._buffer.clearSent(e)},u._xdrOnLoad=function(e,t){var n=Cr(e);!e||n+""!="200"&&""!==n?(n=i(n))&&n.itemsReceived&&n.itemsReceived>n.itemsAccepted&&!u._senderConfig.isRetryDisabled()?u._onPartialSuccess(t,n):u._onError(t,a(e)):(m=0,u._onSuccess(t,0))}}),S}e.Sender=He,function(e,t,n){var r=Object.defineProperty;if(r)try{return r(e,t,n)}catch(i){}typeof n.value!==undefined&&(e[t]=n.value)}(e,"__esModule",{value:!0})};"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e.Microsoft=e.Microsoft||{},e.Microsoft.ApplicationInsights=e.Microsoft.ApplicationInsights||{}));
//# sourceMappingURL=applicationinsights-channel-js.min.js.map
